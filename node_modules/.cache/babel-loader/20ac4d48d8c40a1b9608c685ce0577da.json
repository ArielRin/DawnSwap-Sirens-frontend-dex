{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FetchClient = void 0;\nconst fetchClientError_1 = require(\"./fetchClientError\");\n/**\n * @internal\n */\nclass FetchClient {\n  constructor() {\n    this.maxConcurrentRequests = 15;\n    this.requestIntervalMs = 10;\n    this.pendingRequests = 0;\n  }\n  withTimeout(timeout) {\n    this.timeout = timeout;\n    return this;\n  }\n  get(url, config) {\n    return this.request(url, 'GET', config);\n  }\n  delete(url, config) {\n    return this.request(url, 'DELETE', config);\n  }\n  head(url, config) {\n    return this.request(url, 'HEAD', config);\n  }\n  post(url, data, config) {\n    return this.request(url, 'POST', config, data);\n  }\n  put(url, data, config) {\n    return this.request(url, 'PUT', config, data);\n  }\n  patch(url, data, config) {\n    return this.request(url, 'PATCH', config, data);\n  }\n  async request(url, method, config, data) {\n    var _a;\n    let body;\n    if (data) {\n      if (typeof data === 'object' && !this.isBuffer(data)) {\n        body = JSON.stringify(data);\n        config = config !== null && config !== void 0 ? config : {\n          headers: {}\n        };\n        config.headers = (_a = config.headers) !== null && _a !== void 0 ? _a : {};\n        config.headers['Content-Type'] = 'application/json';\n      } else {\n        body = data;\n      }\n    }\n    await this.waitInQueue();\n    let request;\n    const headers = config ? config.headers : {};\n    if (this.timeout) {\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), this.timeout);\n      request = fetch(url, {\n        method,\n        headers,\n        body,\n        signal: controller.signal\n      }).then(res => {\n        clearTimeout(timeoutId);\n        return res;\n      });\n    } else {\n      request = fetch(url, {\n        method,\n        headers,\n        body\n      });\n    }\n    return request.then(async res => {\n      if (res.status === 204) {\n        return {};\n      }\n      const text = await res.text();\n      const json = text ? JSON.parse(text) : {};\n      if (res.status >= 200 && res.status < 300) {\n        return json;\n      } else {\n        throw new fetchClientError_1.FetchClientJsonPayloadError(res.statusText, json, res.status);\n      }\n    }).finally(() => this.pendingRequests = Math.max(0, this.pendingRequests - 1));\n  }\n  isBuffer(data) {\n    if (typeof ArrayBuffer === 'function') {\n      return ArrayBuffer.isView(data);\n    } else if (typeof Buffer === 'function') {\n      return Buffer.isBuffer(data);\n    } else {\n      return false;\n    }\n  }\n  waitInQueue() {\n    return new Promise(resolve => {\n      const interval = setInterval(() => {\n        if (this.pendingRequests < this.maxConcurrentRequests) {\n          this.pendingRequests++;\n          clearInterval(interval);\n          resolve();\n        }\n      }, this.requestIntervalMs);\n    });\n  }\n}\nexports.FetchClient = FetchClient;","map":{"version":3,"names":["Object","defineProperty","exports","value","FetchClient","fetchClientError_1","require","constructor","maxConcurrentRequests","requestIntervalMs","pendingRequests","withTimeout","timeout","get","url","config","request","delete","head","post","data","put","patch","method","_a","body","isBuffer","JSON","stringify","headers","waitInQueue","controller","AbortController","timeoutId","setTimeout","abort","fetch","signal","then","res","clearTimeout","status","text","json","parse","FetchClientJsonPayloadError","statusText","finally","Math","max","ArrayBuffer","isView","Buffer","Promise","resolve","interval","setInterval","clearInterval"],"sources":["C:/projects/panther-frontend-dex1/node_modules/@crowdin/crowdin-api-client/out/core/internal/fetch/fetchClient.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FetchClient = void 0;\nconst fetchClientError_1 = require(\"./fetchClientError\");\n/**\n * @internal\n */\nclass FetchClient {\n    constructor() {\n        this.maxConcurrentRequests = 15;\n        this.requestIntervalMs = 10;\n        this.pendingRequests = 0;\n    }\n    withTimeout(timeout) {\n        this.timeout = timeout;\n        return this;\n    }\n    get(url, config) {\n        return this.request(url, 'GET', config);\n    }\n    delete(url, config) {\n        return this.request(url, 'DELETE', config);\n    }\n    head(url, config) {\n        return this.request(url, 'HEAD', config);\n    }\n    post(url, data, config) {\n        return this.request(url, 'POST', config, data);\n    }\n    put(url, data, config) {\n        return this.request(url, 'PUT', config, data);\n    }\n    patch(url, data, config) {\n        return this.request(url, 'PATCH', config, data);\n    }\n    async request(url, method, config, data) {\n        var _a;\n        let body;\n        if (data) {\n            if (typeof data === 'object' && !this.isBuffer(data)) {\n                body = JSON.stringify(data);\n                config = config !== null && config !== void 0 ? config : { headers: {} };\n                config.headers = (_a = config.headers) !== null && _a !== void 0 ? _a : {};\n                config.headers['Content-Type'] = 'application/json';\n            }\n            else {\n                body = data;\n            }\n        }\n        await this.waitInQueue();\n        let request;\n        const headers = config ? config.headers : {};\n        if (this.timeout) {\n            const controller = new AbortController();\n            const timeoutId = setTimeout(() => controller.abort(), this.timeout);\n            request = fetch(url, { method, headers, body, signal: controller.signal }).then(res => {\n                clearTimeout(timeoutId);\n                return res;\n            });\n        }\n        else {\n            request = fetch(url, { method, headers, body });\n        }\n        return request\n            .then(async (res) => {\n            if (res.status === 204) {\n                return {};\n            }\n            const text = await res.text();\n            const json = text ? JSON.parse(text) : {};\n            if (res.status >= 200 && res.status < 300) {\n                return json;\n            }\n            else {\n                throw new fetchClientError_1.FetchClientJsonPayloadError(res.statusText, json, res.status);\n            }\n        })\n            .finally(() => (this.pendingRequests = Math.max(0, this.pendingRequests - 1)));\n    }\n    isBuffer(data) {\n        if (typeof ArrayBuffer === 'function') {\n            return ArrayBuffer.isView(data);\n        }\n        else if (typeof Buffer === 'function') {\n            return Buffer.isBuffer(data);\n        }\n        else {\n            return false;\n        }\n    }\n    waitInQueue() {\n        return new Promise(resolve => {\n            const interval = setInterval(() => {\n                if (this.pendingRequests < this.maxConcurrentRequests) {\n                    this.pendingRequests++;\n                    clearInterval(interval);\n                    resolve();\n                }\n            }, this.requestIntervalMs);\n        });\n    }\n}\nexports.FetchClient = FetchClient;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}