{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$();\nimport { ChainId, Token } from '@pantherswap-libs/sdk';\nimport { useMemo } from 'react';\nimport { useSelector } from 'react-redux';\n/**\r\n * Token instances created from token info.\r\n */\nexport class WrappedTokenInfo extends Token {\n  constructor(tokenInfo, tags) {\n    super(tokenInfo.chainId, tokenInfo.address, tokenInfo.decimals, tokenInfo.symbol, tokenInfo.name);\n    this.tokenInfo = void 0;\n    this.tags = void 0;\n    this.tokenInfo = tokenInfo;\n    this.tags = tags;\n  }\n  get logoURI() {\n    return this.tokenInfo.logoURI;\n  }\n}\n/**\r\n * An empty result, useful as a default.\r\n */\nconst EMPTY_LIST = {\n  [ChainId.MAINNET]: {},\n  [ChainId.BSCTESTNET]: {}\n};\nconst listCache = typeof WeakMap !== 'undefined' ? new WeakMap() : null;\nexport function listToTokenMap(list) {\n  const result = listCache === null || listCache === void 0 ? void 0 : listCache.get(list);\n  if (result) return result;\n  const map = list.tokens.reduce((tokenMap, tokenInfo) => {\n    var _tokenInfo$tags$map$f, _tokenInfo$tags, _tokenInfo$tags$map;\n    const tags = (_tokenInfo$tags$map$f = (_tokenInfo$tags = tokenInfo.tags) === null || _tokenInfo$tags === void 0 ? void 0 : (_tokenInfo$tags$map = _tokenInfo$tags.map(tagId => {\n      var _list$tags;\n      if (!((_list$tags = list.tags) !== null && _list$tags !== void 0 && _list$tags[tagId])) return undefined;\n      return {\n        ...list.tags[tagId],\n        id: tagId\n      };\n    })) === null || _tokenInfo$tags$map === void 0 ? void 0 : _tokenInfo$tags$map.filter(x => Boolean(x))) !== null && _tokenInfo$tags$map$f !== void 0 ? _tokenInfo$tags$map$f : [];\n    const token = new WrappedTokenInfo(tokenInfo, tags);\n    if (tokenMap[token.chainId][token.address] !== undefined) throw Error('Duplicate tokens.');\n    return {\n      ...tokenMap,\n      [token.chainId]: {\n        ...tokenMap[token.chainId],\n        [token.address]: token\n      }\n    };\n  }, {\n    ...EMPTY_LIST\n  });\n  listCache === null || listCache === void 0 ? void 0 : listCache.set(list, map);\n  return map;\n}\nexport function useTokenList(url) {\n  _s();\n  const lists = useSelector(state => state.lists.byUrl);\n  return useMemo(() => {\n    var _lists$url;\n    if (!url) return EMPTY_LIST;\n    const current = (_lists$url = lists[url]) === null || _lists$url === void 0 ? void 0 : _lists$url.current;\n    if (!current) return EMPTY_LIST;\n    try {\n      return listToTokenMap(current);\n    } catch (error) {\n      console.error('Could not show token list due to error', error);\n      return EMPTY_LIST;\n    }\n  }, [lists, url]);\n}\n_s(useTokenList, \"CPtzWPSAgVUGbNKI1Wkc4nuPc3o=\", false, function () {\n  return [useSelector];\n});\nexport function useSelectedListUrl() {\n  _s2();\n  return useSelector(state => state.lists.selectedListUrl);\n}\n_s2(useSelectedListUrl, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});\nexport function useSelectedTokenList() {\n  _s3();\n  return useTokenList(useSelectedListUrl());\n}\n_s3(useSelectedTokenList, \"kBaMVumAUsvKwqzs7wdnX29TRuM=\", false, function () {\n  return [useTokenList, useSelectedListUrl];\n});\nexport function useSelectedListInfo() {\n  _s4();\n  var _list$current, _list$pendingUpdate;\n  const selectedUrl = useSelectedListUrl();\n  const listsByUrl = useSelector(state => state.lists.byUrl);\n  const list = selectedUrl ? listsByUrl[selectedUrl] : undefined;\n  return {\n    current: (_list$current = list === null || list === void 0 ? void 0 : list.current) !== null && _list$current !== void 0 ? _list$current : null,\n    pending: (_list$pendingUpdate = list === null || list === void 0 ? void 0 : list.pendingUpdate) !== null && _list$pendingUpdate !== void 0 ? _list$pendingUpdate : null,\n    loading: (list === null || list === void 0 ? void 0 : list.loadingRequestId) !== null\n  };\n}\n\n// returns all downloaded current lists\n_s4(useSelectedListInfo, \"eEXQWQZuHgHfEhZccryGmtXRQJM=\", false, function () {\n  return [useSelectedListUrl, useSelector];\n});\nexport function useAllLists() {\n  _s5();\n  const lists = useSelector(state => state.lists.byUrl);\n  return useMemo(() => Object.keys(lists).map(url => lists[url].current).filter(l => Boolean(l)), [lists]);\n}\n_s5(useAllLists, \"CPtzWPSAgVUGbNKI1Wkc4nuPc3o=\", false, function () {\n  return [useSelector];\n});","map":{"version":3,"names":["ChainId","Token","useMemo","useSelector","WrappedTokenInfo","constructor","tokenInfo","tags","chainId","address","decimals","symbol","name","logoURI","EMPTY_LIST","MAINNET","BSCTESTNET","listCache","WeakMap","listToTokenMap","list","result","get","map","tokens","reduce","tokenMap","_tokenInfo$tags$map$f","_tokenInfo$tags","_tokenInfo$tags$map","tagId","_list$tags","undefined","id","filter","x","Boolean","token","Error","set","useTokenList","url","_s","lists","state","byUrl","_lists$url","current","error","console","useSelectedListUrl","_s2","selectedListUrl","useSelectedTokenList","_s3","useSelectedListInfo","_s4","_list$current","_list$pendingUpdate","selectedUrl","listsByUrl","pending","pendingUpdate","loading","loadingRequestId","useAllLists","_s5","Object","keys","l"],"sources":["C:/projects/panther-frontend-dex1/src/state/lists/hooks.ts"],"sourcesContent":["import { ChainId, Token } from '@pantherswap-libs/sdk'\r\nimport { Tags, TokenInfo, TokenList } from '@uniswap/token-lists'\r\nimport { useMemo } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { AppState } from '../index'\r\n\r\ntype TagDetails = Tags[keyof Tags]\r\nexport interface TagInfo extends TagDetails {\r\n  id: string\r\n}\r\n\r\n/**\r\n * Token instances created from token info.\r\n */\r\nexport class WrappedTokenInfo extends Token {\r\n  public readonly tokenInfo: TokenInfo\r\n\r\n  public readonly tags: TagInfo[]\r\n\r\n  constructor(tokenInfo: TokenInfo, tags: TagInfo[]) {\r\n    super(tokenInfo.chainId, tokenInfo.address, tokenInfo.decimals, tokenInfo.symbol, tokenInfo.name)\r\n    this.tokenInfo = tokenInfo\r\n    this.tags = tags\r\n  }\r\n\r\n  public get logoURI(): string | undefined {\r\n    return this.tokenInfo.logoURI\r\n  }\r\n}\r\n\r\nexport type TokenAddressMap = Readonly<{ [chainId in ChainId]: Readonly<{ [tokenAddress: string]: WrappedTokenInfo }> }>\r\n\r\n/**\r\n * An empty result, useful as a default.\r\n */\r\nconst EMPTY_LIST: TokenAddressMap = {\r\n  [ChainId.MAINNET]: {},\r\n  [ChainId.BSCTESTNET]: {}\r\n}\r\n\r\nconst listCache: WeakMap<TokenList, TokenAddressMap> | null =\r\n  typeof WeakMap !== 'undefined' ? new WeakMap<TokenList, TokenAddressMap>() : null\r\n\r\nexport function listToTokenMap(list: TokenList): TokenAddressMap {\r\n  const result = listCache?.get(list)\r\n  if (result) return result\r\n\r\n  const map = list.tokens.reduce<TokenAddressMap>(\r\n    (tokenMap, tokenInfo) => {\r\n      const tags: TagInfo[] =\r\n        tokenInfo.tags\r\n          ?.map(tagId => {\r\n            if (!list.tags?.[tagId]) return undefined\r\n            return { ...list.tags[tagId], id: tagId }\r\n          })\r\n          ?.filter((x): x is TagInfo => Boolean(x)) ?? []\r\n      const token = new WrappedTokenInfo(tokenInfo, tags)\r\n      if (tokenMap[token.chainId][token.address] !== undefined) throw Error('Duplicate tokens.')\r\n      return {\r\n        ...tokenMap,\r\n        [token.chainId]: {\r\n          ...tokenMap[token.chainId],\r\n          [token.address]: token\r\n        }\r\n      }\r\n    },\r\n    { ...EMPTY_LIST }\r\n  )\r\n  listCache?.set(list, map)\r\n  return map\r\n}\r\n\r\nexport function useTokenList(url: string | undefined): TokenAddressMap {\r\n  const lists = useSelector<AppState, AppState['lists']['byUrl']>(state => state.lists.byUrl)\r\n  return useMemo(() => {\r\n    if (!url) return EMPTY_LIST\r\n    const current = lists[url]?.current\r\n    if (!current) return EMPTY_LIST\r\n    try {\r\n      return listToTokenMap(current)\r\n    } catch (error) {\r\n      console.error('Could not show token list due to error', error)\r\n      return EMPTY_LIST\r\n    }\r\n  }, [lists, url])\r\n}\r\n\r\nexport function useSelectedListUrl(): string | undefined {\r\n  return useSelector<AppState, AppState['lists']['selectedListUrl']>(state => state.lists.selectedListUrl)\r\n}\r\n\r\nexport function useSelectedTokenList(): TokenAddressMap {\r\n  return useTokenList(useSelectedListUrl())\r\n}\r\n\r\nexport function useSelectedListInfo(): { current: TokenList | null; pending: TokenList | null; loading: boolean } {\r\n  const selectedUrl = useSelectedListUrl()\r\n  const listsByUrl = useSelector<AppState, AppState['lists']['byUrl']>(state => state.lists.byUrl)\r\n  const list = selectedUrl ? listsByUrl[selectedUrl] : undefined\r\n  return {\r\n    current: list?.current ?? null,\r\n    pending: list?.pendingUpdate ?? null,\r\n    loading: list?.loadingRequestId !== null\r\n  }\r\n}\r\n\r\n// returns all downloaded current lists\r\nexport function useAllLists(): TokenList[] {\r\n  const lists = useSelector<AppState, AppState['lists']['byUrl']>(state => state.lists.byUrl)\r\n\r\n  return useMemo(\r\n    () =>\r\n      Object.keys(lists)\r\n        .map(url => lists[url].current)\r\n        .filter((l): l is TokenList => Boolean(l)),\r\n    [lists]\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}