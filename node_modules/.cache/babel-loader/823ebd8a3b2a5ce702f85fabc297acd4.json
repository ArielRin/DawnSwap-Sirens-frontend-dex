{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"C:/projects/panther-frontend-dex1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useMemo}from'react';import{ThemeContext}from'styled-components';import{Button,CardBody,Text}from'@pantherswap-libs/uikit';import{Link}from'react-router-dom';import CardNav from'components/CardNav';import Question from'components/QuestionHelper';import FullPositionCard from'components/PositionCard';import{useTokenBalancesWithLoadingIndicator}from'state/wallet/hooks';import{StyledInternalLink,TYPE}from'components/Shared';import{LightCard}from'components/Card';import{RowBetween}from'components/Row';import{AutoColumn}from'components/Column';import{useActiveWeb3React}from'hooks';import{usePairs}from'data/Reserves';import{toV2LiquidityToken,useTrackedTokenPairs}from'state/user/hooks';import{Dots}from'components/swap/styleds';import TranslatedText from'components/TranslatedText';import{TranslateString}from'utils/translateTextHelpers';import PageHeader from'components/PageHeader';import AppBody from'../AppBody';var Body=TYPE.body;export default function Pool(){var theme=useContext(ThemeContext);var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account;// fetch the user's balances of all tracked V2 LP tokens\nvar trackedTokenPairs=useTrackedTokenPairs();var tokenPairsWithLiquidityTokens=useMemo(function(){return trackedTokenPairs.map(function(tokens){return{liquidityToken:toV2LiquidityToken(tokens),tokens:tokens};});},[trackedTokenPairs]);var liquidityTokens=useMemo(function(){return tokenPairsWithLiquidityTokens.map(function(tpwlt){return tpwlt.liquidityToken;});},[tokenPairsWithLiquidityTokens]);var _useTokenBalancesWith=useTokenBalancesWithLoadingIndicator(account!==null&&account!==void 0?account:undefined,liquidityTokens),_useTokenBalancesWith2=_slicedToArray(_useTokenBalancesWith,2),v2PairsBalances=_useTokenBalancesWith2[0],fetchingV2PairBalances=_useTokenBalancesWith2[1];// fetch the reserves for all V2 pools in which the user has a balance\nvar liquidityTokensWithBalances=useMemo(function(){return tokenPairsWithLiquidityTokens.filter(function(_ref){var _v2PairsBalances$liqu;var liquidityToken=_ref.liquidityToken;return(_v2PairsBalances$liqu=v2PairsBalances[liquidityToken.address])===null||_v2PairsBalances$liqu===void 0?void 0:_v2PairsBalances$liqu.greaterThan('0');});},[tokenPairsWithLiquidityTokens,v2PairsBalances]);var v2Pairs=usePairs(liquidityTokensWithBalances.map(function(_ref2){var tokens=_ref2.tokens;return tokens;}));var v2IsLoading=fetchingV2PairBalances||(v2Pairs===null||v2Pairs===void 0?void 0:v2Pairs.length)<liquidityTokensWithBalances.length||(v2Pairs===null||v2Pairs===void 0?void 0:v2Pairs.some(function(V2Pair){return!V2Pair;}));var allV2PairsWithLiquidity=v2Pairs.map(function(_ref3){var _ref4=_slicedToArray(_ref3,2),pair=_ref4[1];return pair;}).filter(function(v2Pair){return Boolean(v2Pair);});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CardNav,{activeIndex:1}),/*#__PURE__*/_jsxs(AppBody,{children:[/*#__PURE__*/_jsx(PageHeader,{title:\"Liquidity\",description:\"Add liquidity to receive Sirens-LP tokens\",children:/*#__PURE__*/_jsx(Button,{id:\"join-pool-button\",as:Link,to:\"/add/ETH\",children:/*#__PURE__*/_jsx(TranslatedText,{translationId:100,children:\"Add Liquidity\"})})}),/*#__PURE__*/_jsx(AutoColumn,{gap:\"lg\",justify:\"center\",children:/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"12px\",style:{width:'100%'},children:[/*#__PURE__*/_jsxs(RowBetween,{padding:\"0 8px\",children:[/*#__PURE__*/_jsx(Text,{color:theme.colors.text,children:/*#__PURE__*/_jsx(TranslatedText,{translationId:102,children:\"Your Liquidity\"})}),/*#__PURE__*/_jsx(Question,{text:TranslateString(130,'When you add liquidity, you are given pool tokens that represent your share. If you donâ€™t see a pool you joined in this list, try importing a pool below.')})]}),!account?/*#__PURE__*/_jsx(LightCard,{padding:\"40px\",children:/*#__PURE__*/_jsx(Body,{color:theme.colors.textDisabled,textAlign:\"center\",children:\"Connect to a wallet to view your liquidity.\"})}):v2IsLoading?/*#__PURE__*/_jsx(LightCard,{padding:\"40px\",children:/*#__PURE__*/_jsx(Body,{color:theme.colors.textDisabled,textAlign:\"center\",children:/*#__PURE__*/_jsx(Dots,{children:\"Loading\"})})}):(allV2PairsWithLiquidity===null||allV2PairsWithLiquidity===void 0?void 0:allV2PairsWithLiquidity.length)>0?/*#__PURE__*/_jsx(_Fragment,{children:allV2PairsWithLiquidity.map(function(v2Pair){return/*#__PURE__*/_jsx(FullPositionCard,{pair:v2Pair},v2Pair.liquidityToken.address);})}):/*#__PURE__*/_jsx(LightCard,{padding:\"40px\",children:/*#__PURE__*/_jsx(Body,{color:theme.colors.textDisabled,textAlign:\"center\",children:/*#__PURE__*/_jsx(TranslatedText,{translationId:104,children:\"No liquidity found.\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Text,{fontSize:\"14px\",style:{padding:'.5rem 0 .5rem 0'},children:[TranslateString(106,\"Don't see a pool you joined?\"),' ',/*#__PURE__*/_jsx(StyledInternalLink,{id:\"import-pool-link\",to:\"/find\",children:TranslateString(108,'Import it.')})]}),/*#__PURE__*/_jsx(Text,{fontSize:\"14px\",style:{padding:'.5rem 0 .5rem 0'},children:\"Or, if you staked your Sirens-LP tokens in a farm, unstake them to see them here.\"})]})]})})})]})]});}","map":{"version":3,"sources":["C:/projects/panther-frontend-dex1/src/pages/Pool/index.tsx"],"names":["React","useContext","useMemo","ThemeContext","Button","CardBody","Text","Link","CardNav","Question","FullPositionCard","useTokenBalancesWithLoadingIndicator","StyledInternalLink","TYPE","LightCard","RowBetween","AutoColumn","useActiveWeb3React","usePairs","toV2LiquidityToken","useTrackedTokenPairs","Dots","TranslatedText","TranslateString","PageHeader","AppBody","Body","body","Pool","theme","account","trackedTokenPairs","tokenPairsWithLiquidityTokens","map","tokens","liquidityToken","liquidityTokens","tpwlt","undefined","v2PairsBalances","fetchingV2PairBalances","liquidityTokensWithBalances","filter","address","greaterThan","v2Pairs","v2IsLoading","length","some","V2Pair","allV2PairsWithLiquidity","pair","v2Pair","Boolean","width","colors","text","textDisabled","padding"],"mappings":"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","sourcesContent":["import React, { useContext, useMemo } from 'react'\r\nimport { ThemeContext } from 'styled-components'\r\nimport { Pair } from '@pantherswap-libs/sdk'\r\nimport { Button, CardBody, Text } from '@pantherswap-libs/uikit'\r\nimport { Link } from 'react-router-dom'\r\nimport CardNav from 'components/CardNav'\r\nimport Question from 'components/QuestionHelper'\r\nimport FullPositionCard from 'components/PositionCard'\r\nimport { useTokenBalancesWithLoadingIndicator } from 'state/wallet/hooks'\r\nimport { StyledInternalLink, TYPE } from 'components/Shared'\r\nimport { LightCard } from 'components/Card'\r\nimport { RowBetween } from 'components/Row'\r\nimport { AutoColumn } from 'components/Column'\r\n\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport { usePairs } from 'data/Reserves'\r\nimport { toV2LiquidityToken, useTrackedTokenPairs } from 'state/user/hooks'\r\nimport { Dots } from 'components/swap/styleds'\r\nimport TranslatedText from 'components/TranslatedText'\r\nimport { TranslateString } from 'utils/translateTextHelpers'\r\nimport PageHeader from 'components/PageHeader'\r\nimport AppBody from '../AppBody'\r\n\r\nconst { body: Body } = TYPE\r\n\r\nexport default function Pool() {\r\n  const theme = useContext(ThemeContext)\r\n  const { account } = useActiveWeb3React()\r\n\r\n  // fetch the user's balances of all tracked V2 LP tokens\r\n  const trackedTokenPairs = useTrackedTokenPairs()\r\n  const tokenPairsWithLiquidityTokens = useMemo(\r\n    () => trackedTokenPairs.map((tokens) => ({ liquidityToken: toV2LiquidityToken(tokens), tokens })),\r\n    [trackedTokenPairs]\r\n  )\r\n  const liquidityTokens = useMemo(() => tokenPairsWithLiquidityTokens.map((tpwlt) => tpwlt.liquidityToken), [\r\n    tokenPairsWithLiquidityTokens,\r\n  ])\r\n  const [v2PairsBalances, fetchingV2PairBalances] = useTokenBalancesWithLoadingIndicator(\r\n    account ?? undefined,\r\n    liquidityTokens\r\n  )\r\n\r\n  // fetch the reserves for all V2 pools in which the user has a balance\r\n  const liquidityTokensWithBalances = useMemo(\r\n    () =>\r\n      tokenPairsWithLiquidityTokens.filter(({ liquidityToken }) =>\r\n        v2PairsBalances[liquidityToken.address]?.greaterThan('0')\r\n      ),\r\n    [tokenPairsWithLiquidityTokens, v2PairsBalances]\r\n  )\r\n\r\n  const v2Pairs = usePairs(liquidityTokensWithBalances.map(({ tokens }) => tokens))\r\n  const v2IsLoading =\r\n    fetchingV2PairBalances || v2Pairs?.length < liquidityTokensWithBalances.length || v2Pairs?.some((V2Pair) => !V2Pair)\r\n\r\n  const allV2PairsWithLiquidity = v2Pairs.map(([, pair]) => pair).filter((v2Pair): v2Pair is Pair => Boolean(v2Pair))\r\n\r\n  return (\r\n    <>\r\n      <CardNav activeIndex={1} />\r\n      <AppBody>\r\n        <PageHeader title=\"Liquidity\" description=\"Add liquidity to receive Sirens-LP tokens\">\r\n          <Button id=\"join-pool-button\" as={Link} to=\"/add/ETH\">\r\n            <TranslatedText translationId={100}>Add Liquidity</TranslatedText>\r\n          </Button>\r\n        </PageHeader>\r\n        <AutoColumn gap=\"lg\" justify=\"center\">\r\n          <CardBody>\r\n            <AutoColumn gap=\"12px\" style={{ width: '100%' }}>\r\n              <RowBetween padding=\"0 8px\">\r\n                <Text color={theme.colors.text}>\r\n                  <TranslatedText translationId={102}>Your Liquidity</TranslatedText>\r\n                </Text>\r\n                <Question\r\n                  text={TranslateString(\r\n                    130,\r\n                    'When you add liquidity, you are given pool tokens that represent your share. If you donâ€™t see a pool you joined in this list, try importing a pool below.'\r\n                  )}\r\n                />\r\n              </RowBetween>\r\n\r\n              {!account ? (\r\n                <LightCard padding=\"40px\">\r\n                  <Body color={theme.colors.textDisabled} textAlign=\"center\">\r\n                    Connect to a wallet to view your liquidity.\r\n                  </Body>\r\n                </LightCard>\r\n              ) : v2IsLoading ? (\r\n                <LightCard padding=\"40px\">\r\n                  <Body color={theme.colors.textDisabled} textAlign=\"center\">\r\n                    <Dots>Loading</Dots>\r\n                  </Body>\r\n                </LightCard>\r\n              ) : allV2PairsWithLiquidity?.length > 0 ? (\r\n                <>\r\n                  {allV2PairsWithLiquidity.map((v2Pair) => (\r\n                    <FullPositionCard key={v2Pair.liquidityToken.address} pair={v2Pair} />\r\n                  ))}\r\n                </>\r\n              ) : (\r\n                <LightCard padding=\"40px\">\r\n                  <Body color={theme.colors.textDisabled} textAlign=\"center\">\r\n                    <TranslatedText translationId={104}>No liquidity found.</TranslatedText>\r\n                  </Body>\r\n                </LightCard>\r\n              )}\r\n\r\n              <div>\r\n                <Text fontSize=\"14px\" style={{ padding: '.5rem 0 .5rem 0' }}>\r\n                  {TranslateString(106, \"Don't see a pool you joined?\")}{' '}\r\n                  <StyledInternalLink id=\"import-pool-link\" to=\"/find\">\r\n                    {TranslateString(108, 'Import it.')}\r\n                  </StyledInternalLink>\r\n                </Text>\r\n                <Text fontSize=\"14px\" style={{ padding: '.5rem 0 .5rem 0' }}>\r\n                  Or, if you staked your Sirens-LP tokens in a farm, unstake them to see them here.\r\n                </Text>\r\n              </div>\r\n            </AutoColumn>\r\n          </CardBody>\r\n        </AutoColumn>\r\n      </AppBody>\r\n    </>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}