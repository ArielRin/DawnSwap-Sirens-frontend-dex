{"ast":null,"code":"import _toConsumableArray from\"C:/projects/panther-frontend-dex1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:/projects/panther-frontend-dex1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _asyncToGenerator from\"C:/projects/panther-frontend-dex1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/projects/panther-frontend-dex1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"C:/projects/panther-frontend-dex1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"C:/projects/panther-frontend-dex1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  padding-left: 24px;\\n  padding-right: 24px;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  border: 1px solid \",\";\\n  border-radius: 16px;\\n  padding: 24px;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useCallback,useContext,useMemo,useState}from'react';import styled,{ThemeContext}from'styled-components';import{splitSignature}from'@ethersproject/bytes';import{currencyEquals,ETHER,Percent,WETH}from'@pantherswap-libs/sdk';import{Button,Flex,Text}from'@pantherswap-libs/uikit';import{ArrowDown,Plus}from'react-feather';import{BigNumber}from'@ethersproject/bignumber';import ConnectWalletButton from'components/ConnectWalletButton';import{AutoColumn,ColumnCenter}from'../../components/Column';import TransactionConfirmationModal,{ConfirmationModalContent}from'../../components/TransactionConfirmationModal';import CurrencyInputPanel from'../../components/CurrencyInputPanel';import DoubleCurrencyLogo from'../../components/DoubleLogo';import{AddRemoveTabs}from'../../components/NavigationTabs';import{MinimalPositionCard}from'../../components/PositionCard';import{RowBetween,RowFixed}from'../../components/Row';import Slider from'../../components/Slider';import CurrencyLogo from'../../components/CurrencyLogo';import{ROUTER_ADDRESS}from'../../constants';import{useActiveWeb3React}from'../../hooks';import{useCurrency}from'../../hooks/Tokens';import{usePairContract}from'../../hooks/useContract';import{useTransactionAdder}from'../../state/transactions/hooks';import{StyledInternalLink,TYPE}from'../../components/Shared';import{calculateGasMargin,calculateSlippageAmount,getRouterContract}from'../../utils';import{currencyId}from'../../utils/currencyId';import useDebouncedChangeHandler from'../../utils/useDebouncedChangeHandler';import{wrappedCurrency}from'../../utils/wrappedCurrency';import AppBody from'../AppBody';import{ClickableText,Wrapper}from'../Pool/styleds';import{useApproveCallback,ApprovalState}from'../../hooks/useApproveCallback';import{Dots}from'../../components/swap/styleds';import{useBurnActionHandlers,useDerivedBurnInfo,useBurnState}from'../../state/burn/hooks';import{Field}from'../../state/burn/actions';import{useUserDeadline,useUserSlippageTolerance}from'../../state/user/hooks';var Italic=TYPE.italic;var OutlineCard=styled.div(_templateObject(),function(_ref){var theme=_ref.theme;return theme.colors.borderColor;});var Body=styled.div(_templateObject2());export default function RemoveLiquidity(_ref2){var _useCurrency,_useCurrency2,_parsedAmounts$Field$,_parsedAmounts$Field$2,_parsedAmounts$Field$3,_parsedAmounts$Field$4,_parsedAmounts$Field$5,_parsedAmounts$Field$6,_formattedAmounts,_parsedAmounts$Field$7,_pair$liquidityToken,_parsedAmounts$Field$11,_parsedAmounts$Field$12;var history=_ref2.history,_ref2$match$params=_ref2.match.params,currencyIdA=_ref2$match$params.currencyIdA,currencyIdB=_ref2$match$params.currencyIdB;var currencyA=(_useCurrency=useCurrency(currencyIdA))!==null&&_useCurrency!==void 0?_useCurrency:undefined,currencyB=(_useCurrency2=useCurrency(currencyIdB))!==null&&_useCurrency2!==void 0?_useCurrency2:undefined;var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account,chainId=_useActiveWeb3React.chainId,library=_useActiveWeb3React.library;var _useMemo=useMemo(function(){return[wrappedCurrency(currencyA,chainId),wrappedCurrency(currencyB,chainId)];},[currencyA,currencyB,chainId]),_useMemo2=_slicedToArray(_useMemo,2),tokenA=_useMemo2[0],tokenB=_useMemo2[1];var theme=useContext(ThemeContext);// burn state\nvar _useBurnState=useBurnState(),independentField=_useBurnState.independentField,typedValue=_useBurnState.typedValue;var _useDerivedBurnInfo=useDerivedBurnInfo(currencyA!==null&&currencyA!==void 0?currencyA:undefined,currencyB!==null&&currencyB!==void 0?currencyB:undefined),pair=_useDerivedBurnInfo.pair,parsedAmounts=_useDerivedBurnInfo.parsedAmounts,error=_useDerivedBurnInfo.error;var _useBurnActionHandler=useBurnActionHandlers(),_onUserInput=_useBurnActionHandler.onUserInput;var isValid=!error;// modal and loading\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),showConfirm=_useState2[0],setShowConfirm=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showDetailed=_useState4[0],setShowDetailed=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),attemptingTxn=_useState6[0],setAttemptingTxn=_useState6[1];// clicked confirm\n// txn values\nvar _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),txHash=_useState8[0],setTxHash=_useState8[1];var _useUserDeadline=useUserDeadline(),_useUserDeadline2=_slicedToArray(_useUserDeadline,1),deadline=_useUserDeadline2[0];var _useUserSlippageToler=useUserSlippageTolerance(),_useUserSlippageToler2=_slicedToArray(_useUserSlippageToler,1),allowedSlippage=_useUserSlippageToler2[0];var formattedAmounts=(_formattedAmounts={},_defineProperty(_formattedAmounts,Field.LIQUIDITY_PERCENT,parsedAmounts[Field.LIQUIDITY_PERCENT].equalTo('0')?'0':parsedAmounts[Field.LIQUIDITY_PERCENT].lessThan(new Percent('1','100'))?'<1':parsedAmounts[Field.LIQUIDITY_PERCENT].toFixed(0)),_defineProperty(_formattedAmounts,Field.LIQUIDITY,independentField===Field.LIQUIDITY?typedValue:(_parsedAmounts$Field$=(_parsedAmounts$Field$2=parsedAmounts[Field.LIQUIDITY])===null||_parsedAmounts$Field$2===void 0?void 0:_parsedAmounts$Field$2.toSignificant(6))!==null&&_parsedAmounts$Field$!==void 0?_parsedAmounts$Field$:''),_defineProperty(_formattedAmounts,Field.CURRENCY_A,independentField===Field.CURRENCY_A?typedValue:(_parsedAmounts$Field$3=(_parsedAmounts$Field$4=parsedAmounts[Field.CURRENCY_A])===null||_parsedAmounts$Field$4===void 0?void 0:_parsedAmounts$Field$4.toSignificant(6))!==null&&_parsedAmounts$Field$3!==void 0?_parsedAmounts$Field$3:''),_defineProperty(_formattedAmounts,Field.CURRENCY_B,independentField===Field.CURRENCY_B?typedValue:(_parsedAmounts$Field$5=(_parsedAmounts$Field$6=parsedAmounts[Field.CURRENCY_B])===null||_parsedAmounts$Field$6===void 0?void 0:_parsedAmounts$Field$6.toSignificant(6))!==null&&_parsedAmounts$Field$5!==void 0?_parsedAmounts$Field$5:''),_formattedAmounts);var atMaxAmount=(_parsedAmounts$Field$7=parsedAmounts[Field.LIQUIDITY_PERCENT])===null||_parsedAmounts$Field$7===void 0?void 0:_parsedAmounts$Field$7.equalTo(new Percent('1'));// pair contract\nvar pairContract=usePairContract(pair===null||pair===void 0?void 0:(_pair$liquidityToken=pair.liquidityToken)===null||_pair$liquidityToken===void 0?void 0:_pair$liquidityToken.address);// allowance handling\nvar _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),signatureData=_useState10[0],setSignatureData=_useState10[1];var _useApproveCallback=useApproveCallback(parsedAmounts[Field.LIQUIDITY],ROUTER_ADDRESS),_useApproveCallback2=_slicedToArray(_useApproveCallback,2),approval=_useApproveCallback2[0],approveCallback=_useApproveCallback2[1];function onAttemptToApprove(){return _onAttemptToApprove.apply(this,arguments);}// wrapped onUserInput to clear signatures\nfunction _onAttemptToApprove(){_onAttemptToApprove=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var liquidityAmount,nonce,deadlineForSignature,EIP712Domain,domain,Permit,message,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!pairContract||!pair||!library)){_context.next=2;break;}throw new Error('missing dependencies');case 2:liquidityAmount=parsedAmounts[Field.LIQUIDITY];if(liquidityAmount){_context.next=5;break;}throw new Error('missing liquidity amount');case 5:_context.next=7;return pairContract.nonces(account);case 7:nonce=_context.sent;deadlineForSignature=Math.ceil(Date.now()/1000)+deadline;EIP712Domain=[{name:'name',type:'string'},{name:'version',type:'string'},{name:'chainId',type:'uint256'},{name:'verifyingContract',type:'address'}];domain={name:'Sirens Treasure LPs',version:'1',chainId:chainId,verifyingContract:pair.liquidityToken.address};Permit=[{name:'owner',type:'address'},{name:'spender',type:'address'},{name:'value',type:'uint256'},{name:'nonce',type:'uint256'},{name:'deadline',type:'uint256'}];message={owner:account,spender:ROUTER_ADDRESS,value:liquidityAmount.raw.toString(),nonce:nonce.toHexString(),deadline:deadlineForSignature};data=JSON.stringify({types:{EIP712Domain:EIP712Domain,Permit:Permit},domain:domain,primaryType:'Permit',message:message});library.send('eth_signTypedData_v4',[account,data]).then(splitSignature).then(function(signature){setSignatureData({v:signature.v,r:signature.r,s:signature.s,deadline:deadlineForSignature});}).catch(function(e){// for all errors other than 4001 (EIP-1193 user rejected request), fall back to manual approve\nif((e===null||e===void 0?void 0:e.code)!==4001){approveCallback();}});case 15:case\"end\":return _context.stop();}}},_callee);}));return _onAttemptToApprove.apply(this,arguments);}var onUserInput=useCallback(function(field,val){setSignatureData(null);return _onUserInput(field,val);},[_onUserInput]);var onLiquidityInput=useCallback(function(val){return onUserInput(Field.LIQUIDITY,val);},[onUserInput]);var onCurrencyAInput=useCallback(function(val){return onUserInput(Field.CURRENCY_A,val);},[onUserInput]);var onCurrencyBInput=useCallback(function(val){return onUserInput(Field.CURRENCY_B,val);},[onUserInput]);// tx sending\nvar addTransaction=useTransactionAdder();function onRemove(){return _onRemove.apply(this,arguments);}function _onRemove(){_onRemove=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _amountsMin;var currencyAmountA,currencyAmountB,router,amountsMin,liquidityAmount,currencyBIsETH,oneCurrencyIsETH,deadlineFromNow,methodNames,args,safeGasEstimates,indexOfSuccessfulEstimation,methodName,safeGasEstimate;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(!chainId||!library||!account)){_context2.next=2;break;}throw new Error('missing dependencies');case 2:currencyAmountA=parsedAmounts[Field.CURRENCY_A],currencyAmountB=parsedAmounts[Field.CURRENCY_B];if(!(!currencyAmountA||!currencyAmountB)){_context2.next=5;break;}throw new Error('missing currency amounts');case 5:router=getRouterContract(chainId,library,account);amountsMin=(_amountsMin={},_defineProperty(_amountsMin,Field.CURRENCY_A,calculateSlippageAmount(currencyAmountA,allowedSlippage)[0]),_defineProperty(_amountsMin,Field.CURRENCY_B,calculateSlippageAmount(currencyAmountB,allowedSlippage)[0]),_amountsMin);if(!(!currencyA||!currencyB)){_context2.next=9;break;}throw new Error('missing tokens');case 9:liquidityAmount=parsedAmounts[Field.LIQUIDITY];if(liquidityAmount){_context2.next=12;break;}throw new Error('missing liquidity amount');case 12:currencyBIsETH=currencyB===ETHER;oneCurrencyIsETH=currencyA===ETHER||currencyBIsETH;deadlineFromNow=Math.ceil(Date.now()/1000)+deadline;if(!(!tokenA||!tokenB)){_context2.next=17;break;}throw new Error('could not wrap');case 17:if(!(approval===ApprovalState.APPROVED)){_context2.next=21;break;}// removeLiquidityETH\nif(oneCurrencyIsETH){methodNames=['removeLiquidityETH','removeLiquidityETHSupportingFeeOnTransferTokens'];args=[currencyBIsETH?tokenA.address:tokenB.address,liquidityAmount.raw.toString(),amountsMin[currencyBIsETH?Field.CURRENCY_A:Field.CURRENCY_B].toString(),amountsMin[currencyBIsETH?Field.CURRENCY_B:Field.CURRENCY_A].toString(),account,deadlineFromNow];}// removeLiquidity\nelse{methodNames=['removeLiquidity'];args=[tokenA.address,tokenB.address,liquidityAmount.raw.toString(),amountsMin[Field.CURRENCY_A].toString(),amountsMin[Field.CURRENCY_B].toString(),account,deadlineFromNow];}_context2.next=26;break;case 21:if(!(signatureData!==null)){_context2.next=25;break;}// removeLiquidityETHWithPermit\nif(oneCurrencyIsETH){methodNames=['removeLiquidityETHWithPermit','removeLiquidityETHWithPermitSupportingFeeOnTransferTokens'];args=[currencyBIsETH?tokenA.address:tokenB.address,liquidityAmount.raw.toString(),amountsMin[currencyBIsETH?Field.CURRENCY_A:Field.CURRENCY_B].toString(),amountsMin[currencyBIsETH?Field.CURRENCY_B:Field.CURRENCY_A].toString(),account,signatureData.deadline,false,signatureData.v,signatureData.r,signatureData.s];}// removeLiquidityETHWithPermit\nelse{methodNames=['removeLiquidityWithPermit'];args=[tokenA.address,tokenB.address,liquidityAmount.raw.toString(),amountsMin[Field.CURRENCY_A].toString(),amountsMin[Field.CURRENCY_B].toString(),account,signatureData.deadline,false,signatureData.v,signatureData.r,signatureData.s];}_context2.next=26;break;case 25:throw new Error('Attempting to confirm without approval or a signature. Please contact support.');case 26:_context2.next=28;return Promise.all(methodNames.map(function(methodName,index){var _router$estimateGas;return(_router$estimateGas=router.estimateGas)[methodName].apply(_router$estimateGas,_toConsumableArray(args)).then(calculateGasMargin).catch(function(e){console.error(\"estimateGas failed\",index,methodName,args,e);return undefined;});}));case 28:safeGasEstimates=_context2.sent;indexOfSuccessfulEstimation=safeGasEstimates.findIndex(function(safeGasEstimate){return BigNumber.isBigNumber(safeGasEstimate);});// all estimations failed...\nif(!(indexOfSuccessfulEstimation===-1)){_context2.next=34;break;}console.error('This transaction would fail. Please contact support.');_context2.next=39;break;case 34:methodName=methodNames[indexOfSuccessfulEstimation];safeGasEstimate=safeGasEstimates[indexOfSuccessfulEstimation];setAttemptingTxn(true);_context2.next=39;return router[methodName].apply(router,_toConsumableArray(args).concat([{gasLimit:safeGasEstimate}])).then(function(response){var _parsedAmounts$Field$13,_parsedAmounts$Field$14;setAttemptingTxn(false);addTransaction(response,{summary:\"Remove \".concat((_parsedAmounts$Field$13=parsedAmounts[Field.CURRENCY_A])===null||_parsedAmounts$Field$13===void 0?void 0:_parsedAmounts$Field$13.toSignificant(3),\" \").concat(currencyA===null||currencyA===void 0?void 0:currencyA.symbol,\" and \").concat((_parsedAmounts$Field$14=parsedAmounts[Field.CURRENCY_B])===null||_parsedAmounts$Field$14===void 0?void 0:_parsedAmounts$Field$14.toSignificant(3),\" \").concat(currencyB===null||currencyB===void 0?void 0:currencyB.symbol)});setTxHash(response.hash);}).catch(function(e){setAttemptingTxn(false);// we only care if the error is something _other_ than the user rejected the tx\nconsole.error(e);});case 39:case\"end\":return _context2.stop();}}},_callee2);}));return _onRemove.apply(this,arguments);}function modalHeader(){var _parsedAmounts$Field$8,_parsedAmounts$Field$9;return/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",style:{marginTop:'20px'},children:[/*#__PURE__*/_jsxs(RowBetween,{align:\"flex-end\",children:[/*#__PURE__*/_jsx(Text,{fontSize:\"24px\",children:(_parsedAmounts$Field$8=parsedAmounts[Field.CURRENCY_A])===null||_parsedAmounts$Field$8===void 0?void 0:_parsedAmounts$Field$8.toSignificant(6)}),/*#__PURE__*/_jsxs(RowFixed,{gap:\"4px\",children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:currencyA,size:\"24px\"}),/*#__PURE__*/_jsx(Text,{fontSize:\"24px\",style:{marginLeft:'10px'},children:currencyA===null||currencyA===void 0?void 0:currencyA.symbol})]})]}),/*#__PURE__*/_jsx(RowFixed,{children:/*#__PURE__*/_jsx(Plus,{size:\"16\",color:theme.colors.textSubtle})}),/*#__PURE__*/_jsxs(RowBetween,{align:\"flex-end\",children:[/*#__PURE__*/_jsx(Text,{fontSize:\"24px\",children:(_parsedAmounts$Field$9=parsedAmounts[Field.CURRENCY_B])===null||_parsedAmounts$Field$9===void 0?void 0:_parsedAmounts$Field$9.toSignificant(6)}),/*#__PURE__*/_jsxs(RowFixed,{gap:\"4px\",children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:currencyB,size:\"24px\"}),/*#__PURE__*/_jsx(Text,{fontSize:\"24px\",style:{marginLeft:'10px'},children:currencyB===null||currencyB===void 0?void 0:currencyB.symbol})]})]}),/*#__PURE__*/_jsx(Italic,{fontSize:12,color:theme.colors.textSubtle,textAlign:\"left\",padding:\"12px 0 0 0\",children:\"Output is estimated. If the price changes by more than \".concat(allowedSlippage/100,\"% your transaction will revert.\")})]});}function modalBottom(){var _parsedAmounts$Field$10;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(Text,{color:\"textSubtle\",children:[\"FLIP \".concat(currencyA===null||currencyA===void 0?void 0:currencyA.symbol,\"/\").concat(currencyB===null||currencyB===void 0?void 0:currencyB.symbol),\" Burned\"]}),/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(DoubleCurrencyLogo,{currency0:currencyA,currency1:currencyB,margin:true}),/*#__PURE__*/_jsx(Text,{children:(_parsedAmounts$Field$10=parsedAmounts[Field.LIQUIDITY])===null||_parsedAmounts$Field$10===void 0?void 0:_parsedAmounts$Field$10.toSignificant(6)})]})]}),pair&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(Text,{color:\"textSubtle\",children:\"Price\"}),/*#__PURE__*/_jsxs(Text,{children:[\"1 \",currencyA===null||currencyA===void 0?void 0:currencyA.symbol,\" = \",tokenA?pair.priceOf(tokenA).toSignificant(6):'-',\" \",currencyB===null||currencyB===void 0?void 0:currencyB.symbol]})]}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(Text,{children:[\"1 \",currencyB===null||currencyB===void 0?void 0:currencyB.symbol,\" = \",tokenB?pair.priceOf(tokenB).toSignificant(6):'-',\" \",currencyA===null||currencyA===void 0?void 0:currencyA.symbol]})]})]}),/*#__PURE__*/_jsx(Button,{disabled:!(approval===ApprovalState.APPROVED||signatureData!==null),onClick:onRemove,children:\"Confirm\"})]});}var pendingText=\"Removing \".concat((_parsedAmounts$Field$11=parsedAmounts[Field.CURRENCY_A])===null||_parsedAmounts$Field$11===void 0?void 0:_parsedAmounts$Field$11.toSignificant(6),\" \").concat(currencyA===null||currencyA===void 0?void 0:currencyA.symbol,\" and \").concat((_parsedAmounts$Field$12=parsedAmounts[Field.CURRENCY_B])===null||_parsedAmounts$Field$12===void 0?void 0:_parsedAmounts$Field$12.toSignificant(6),\" \").concat(currencyB===null||currencyB===void 0?void 0:currencyB.symbol);var liquidityPercentChangeCallback=useCallback(function(value){onUserInput(Field.LIQUIDITY_PERCENT,value.toString());},[onUserInput]);var oneCurrencyIsETH=currencyA===ETHER||currencyB===ETHER;var oneCurrencyIsWETH=Boolean(chainId&&(currencyA&&currencyEquals(WETH[chainId],currencyA)||currencyB&&currencyEquals(WETH[chainId],currencyB)));var handleSelectCurrencyA=useCallback(function(currency){if(currencyIdB&&currencyId(currency)===currencyIdB){history.push(\"/remove/\".concat(currencyId(currency),\"/\").concat(currencyIdA));}else{history.push(\"/remove/\".concat(currencyId(currency),\"/\").concat(currencyIdB));}},[currencyIdA,currencyIdB,history]);var handleSelectCurrencyB=useCallback(function(currency){if(currencyIdA&&currencyId(currency)===currencyIdA){history.push(\"/remove/\".concat(currencyIdB,\"/\").concat(currencyId(currency)));}else{history.push(\"/remove/\".concat(currencyIdA,\"/\").concat(currencyId(currency)));}},[currencyIdA,currencyIdB,history]);var handleDismissConfirmation=useCallback(function(){setShowConfirm(false);setSignatureData(null);// important that we clear signature data to avoid bad sigs\n// if there was a tx hash, we want to clear the input\nif(txHash){onUserInput(Field.LIQUIDITY_PERCENT,'0');}setTxHash('');},[onUserInput,txHash]);var _useDebouncedChangeHa=useDebouncedChangeHandler(Number.parseInt(parsedAmounts[Field.LIQUIDITY_PERCENT].toFixed(0)),liquidityPercentChangeCallback),_useDebouncedChangeHa2=_slicedToArray(_useDebouncedChangeHa,2),innerLiquidityPercentage=_useDebouncedChangeHa2[0],setInnerLiquidityPercentage=_useDebouncedChangeHa2[1];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(AppBody,{children:[/*#__PURE__*/_jsx(AddRemoveTabs,{adding:false}),/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(TransactionConfirmationModal,{isOpen:showConfirm,onDismiss:handleDismissConfirmation,attemptingTxn:attemptingTxn,hash:txHash||'',content:function content(){return/*#__PURE__*/_jsx(ConfirmationModalContent,{title:\"You will receive\",onDismiss:handleDismissConfirmation,topContent:modalHeader,bottomContent:modalBottom});},pendingText:pendingText}),/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsx(Body,{children:/*#__PURE__*/_jsx(OutlineCard,{children:/*#__PURE__*/_jsxs(AutoColumn,{children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(Text,{children:\"Amount\"}),/*#__PURE__*/_jsx(ClickableText,{onClick:function onClick(){setShowDetailed(!showDetailed);},children:showDetailed?'Simple':'Detailed'})]}),/*#__PURE__*/_jsx(Flex,{justifyContent:\"start\",children:/*#__PURE__*/_jsxs(Text,{fontSize:\"64px\",children:[formattedAmounts[Field.LIQUIDITY_PERCENT],\"%\"]})}),!showDetailed&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Flex,{mb:\"8px\",children:/*#__PURE__*/_jsx(Slider,{value:innerLiquidityPercentage,onChange:setInnerLiquidityPercentage})}),/*#__PURE__*/_jsxs(Flex,{justifyContent:\"space-around\",children:[/*#__PURE__*/_jsx(Button,{variant:\"tertiary\",size:\"sm\",onClick:function onClick(){return onUserInput(Field.LIQUIDITY_PERCENT,'25');},children:\"25%\"}),/*#__PURE__*/_jsx(Button,{variant:\"tertiary\",size:\"sm\",onClick:function onClick(){return onUserInput(Field.LIQUIDITY_PERCENT,'50');},children:\"50%\"}),/*#__PURE__*/_jsx(Button,{variant:\"tertiary\",size:\"sm\",onClick:function onClick(){return onUserInput(Field.LIQUIDITY_PERCENT,'75');},children:\"75%\"}),/*#__PURE__*/_jsx(Button,{variant:\"tertiary\",size:\"sm\",onClick:function onClick(){return onUserInput(Field.LIQUIDITY_PERCENT,'100');},children:\"Max\"})]})]})]})})}),!showDetailed&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ColumnCenter,{children:/*#__PURE__*/_jsx(ArrowDown,{size:\"16\",color:theme.colors.textSubtle})}),/*#__PURE__*/_jsx(Body,{children:/*#__PURE__*/_jsx(OutlineCard,{children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"10px\",children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(Text,{fontSize:\"24px\",children:formattedAmounts[Field.CURRENCY_A]||'-'}),/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:currencyA,style:{marginRight:'12px'}}),/*#__PURE__*/_jsx(Text,{fontSize:\"24px\",id:\"remove-liquidity-tokena-symbol\",children:currencyA===null||currencyA===void 0?void 0:currencyA.symbol})]})]}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(Text,{fontSize:\"24px\",children:formattedAmounts[Field.CURRENCY_B]||'-'}),/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:currencyB,style:{marginRight:'12px'}}),/*#__PURE__*/_jsx(Text,{fontSize:\"24px\",id:\"remove-liquidity-tokenb-symbol\",children:currencyB===null||currencyB===void 0?void 0:currencyB.symbol})]})]}),chainId&&(oneCurrencyIsWETH||oneCurrencyIsETH)?/*#__PURE__*/_jsx(RowBetween,{style:{justifyContent:'flex-end'},children:oneCurrencyIsETH?/*#__PURE__*/_jsx(StyledInternalLink,{to:\"/remove/\".concat(currencyA===ETHER?WETH[chainId].address:currencyIdA,\"/\").concat(currencyB===ETHER?WETH[chainId].address:currencyIdB),children:\"Receive WREDLC\"}):oneCurrencyIsWETH?/*#__PURE__*/_jsx(StyledInternalLink,{to:\"/remove/\".concat(currencyA&&currencyEquals(currencyA,WETH[chainId])?'ETH':currencyIdA,\"/\").concat(currencyB&&currencyEquals(currencyB,WETH[chainId])?'ETH':currencyIdB),children:\"Receive REDLC\"}):null}):null]})})})]}),/*#__PURE__*/_jsxs(Body,{style:{paddingBottom:'24px'},children:[showDetailed&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CurrencyInputPanel,{value:formattedAmounts[Field.LIQUIDITY],onUserInput:onLiquidityInput,onMax:function onMax(){onUserInput(Field.LIQUIDITY_PERCENT,'100');},showMaxButton:!atMaxAmount,disableCurrencySelect:true,currency:pair===null||pair===void 0?void 0:pair.liquidityToken,pair:pair,id:\"liquidity-amount\"}),/*#__PURE__*/_jsx(ColumnCenter,{children:/*#__PURE__*/_jsx(ArrowDown,{size:\"16\",color:theme.colors.textSubtle})}),/*#__PURE__*/_jsx(CurrencyInputPanel,{hideBalance:true,value:formattedAmounts[Field.CURRENCY_A],onUserInput:onCurrencyAInput,onMax:function onMax(){return onUserInput(Field.LIQUIDITY_PERCENT,'100');},showMaxButton:!atMaxAmount,currency:currencyA,label:\"Output\",onCurrencySelect:handleSelectCurrencyA,id:\"remove-liquidity-tokena\"}),/*#__PURE__*/_jsx(ColumnCenter,{children:/*#__PURE__*/_jsx(Plus,{size:\"16\",color:theme.colors.textSubtle})}),/*#__PURE__*/_jsx(CurrencyInputPanel,{hideBalance:true,value:formattedAmounts[Field.CURRENCY_B],onUserInput:onCurrencyBInput,onMax:function onMax(){return onUserInput(Field.LIQUIDITY_PERCENT,'100');},showMaxButton:!atMaxAmount,currency:currencyB,label:\"Output\",onCurrencySelect:handleSelectCurrencyB,id:\"remove-liquidity-tokenb\"})]}),pair&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:'24px'},children:[/*#__PURE__*/_jsxs(Flex,{justifyContent:\"space-between\",mb:\"8px\",children:[\"Price:\",/*#__PURE__*/_jsxs(\"div\",{children:[\"1 \",currencyA===null||currencyA===void 0?void 0:currencyA.symbol,\" = \",tokenA?pair.priceOf(tokenA).toSignificant(6):'-',\" \",currencyB===null||currencyB===void 0?void 0:currencyB.symbol]})]}),/*#__PURE__*/_jsxs(Flex,{justifyContent:\"space-between\",children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[\"1 \",currencyB===null||currencyB===void 0?void 0:currencyB.symbol,\" = \",tokenB?pair.priceOf(tokenB).toSignificant(6):'-',\" \",currencyA===null||currencyA===void 0?void 0:currencyA.symbol]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{position:'relative'},children:!account?/*#__PURE__*/_jsx(ConnectWalletButton,{fullWidth:true}):/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(Button,{onClick:onAttemptToApprove,variant:approval===ApprovalState.APPROVED||signatureData!==null?'success':'primary',disabled:approval!==ApprovalState.NOT_APPROVED||signatureData!==null,mr:\"8px\",children:approval===ApprovalState.PENDING?/*#__PURE__*/_jsx(Dots,{children:\"Approving\"}):approval===ApprovalState.APPROVED||signatureData!==null?'Approved':'Approve'}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){setShowConfirm(true);},disabled:!isValid||signatureData===null&&approval!==ApprovalState.APPROVED,variant:!isValid&&!!parsedAmounts[Field.CURRENCY_A]&&!!parsedAmounts[Field.CURRENCY_B]?'danger':'primary',children:error||'Remove'})]})})]})]})]})]}),pair?/*#__PURE__*/_jsx(AutoColumn,{style:{maxWidth:'436px',width:'100%',marginTop:'1rem'},children:/*#__PURE__*/_jsx(MinimalPositionCard,{showUnwrapped:oneCurrencyIsWETH,pair:pair})}):null]});}","map":{"version":3,"sources":["C:/projects/panther-frontend-dex1/src/pages/RemoveLiquidity/index.tsx"],"names":["React","useCallback","useContext","useMemo","useState","styled","ThemeContext","splitSignature","currencyEquals","ETHER","Percent","WETH","Button","Flex","Text","ArrowDown","Plus","BigNumber","ConnectWalletButton","AutoColumn","ColumnCenter","TransactionConfirmationModal","ConfirmationModalContent","CurrencyInputPanel","DoubleCurrencyLogo","AddRemoveTabs","MinimalPositionCard","RowBetween","RowFixed","Slider","CurrencyLogo","ROUTER_ADDRESS","useActiveWeb3React","useCurrency","usePairContract","useTransactionAdder","StyledInternalLink","TYPE","calculateGasMargin","calculateSlippageAmount","getRouterContract","currencyId","useDebouncedChangeHandler","wrappedCurrency","AppBody","ClickableText","Wrapper","useApproveCallback","ApprovalState","Dots","useBurnActionHandlers","useDerivedBurnInfo","useBurnState","Field","useUserDeadline","useUserSlippageTolerance","Italic","italic","OutlineCard","div","theme","colors","borderColor","Body","RemoveLiquidity","history","match","params","currencyIdA","currencyIdB","currencyA","undefined","currencyB","account","chainId","library","tokenA","tokenB","independentField","typedValue","pair","parsedAmounts","error","_onUserInput","onUserInput","isValid","showConfirm","setShowConfirm","showDetailed","setShowDetailed","attemptingTxn","setAttemptingTxn","txHash","setTxHash","deadline","allowedSlippage","formattedAmounts","LIQUIDITY_PERCENT","equalTo","lessThan","toFixed","LIQUIDITY","toSignificant","CURRENCY_A","CURRENCY_B","atMaxAmount","pairContract","liquidityToken","address","signatureData","setSignatureData","approval","approveCallback","onAttemptToApprove","Error","liquidityAmount","nonces","nonce","deadlineForSignature","Math","ceil","Date","now","EIP712Domain","name","type","domain","version","verifyingContract","Permit","message","owner","spender","value","raw","toString","toHexString","data","JSON","stringify","types","primaryType","send","then","signature","v","r","s","catch","e","code","field","val","onLiquidityInput","onCurrencyAInput","onCurrencyBInput","addTransaction","onRemove","currencyAmountA","currencyAmountB","router","amountsMin","currencyBIsETH","oneCurrencyIsETH","deadlineFromNow","APPROVED","methodNames","args","Promise","all","map","methodName","index","estimateGas","console","safeGasEstimates","indexOfSuccessfulEstimation","findIndex","safeGasEstimate","isBigNumber","gasLimit","response","summary","symbol","hash","modalHeader","marginTop","marginLeft","textSubtle","modalBottom","priceOf","pendingText","liquidityPercentChangeCallback","oneCurrencyIsWETH","Boolean","handleSelectCurrencyA","currency","push","handleSelectCurrencyB","handleDismissConfirmation","Number","parseInt","innerLiquidityPercentage","setInnerLiquidityPercentage","marginRight","justifyContent","paddingBottom","padding","position","NOT_APPROVED","PENDING","maxWidth","width"],"mappings":"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","sourcesContent":["import React, { useCallback, useContext, useMemo, useState } from 'react'\r\nimport styled, { ThemeContext } from 'styled-components'\r\nimport { splitSignature } from '@ethersproject/bytes'\r\nimport { Contract } from '@ethersproject/contracts'\r\nimport { TransactionResponse } from '@ethersproject/providers'\r\nimport { Currency, currencyEquals, ETHER, Percent, WETH } from '@pantherswap-libs/sdk'\r\nimport { Button, Flex, Text } from '@pantherswap-libs/uikit'\r\nimport { ArrowDown, Plus } from 'react-feather'\r\nimport { RouteComponentProps } from 'react-router'\r\n\r\nimport { BigNumber } from '@ethersproject/bignumber'\r\nimport ConnectWalletButton from 'components/ConnectWalletButton'\r\nimport { AutoColumn, ColumnCenter } from '../../components/Column'\r\nimport TransactionConfirmationModal, { ConfirmationModalContent } from '../../components/TransactionConfirmationModal'\r\nimport CurrencyInputPanel from '../../components/CurrencyInputPanel'\r\nimport DoubleCurrencyLogo from '../../components/DoubleLogo'\r\nimport { AddRemoveTabs } from '../../components/NavigationTabs'\r\nimport { MinimalPositionCard } from '../../components/PositionCard'\r\nimport { RowBetween, RowFixed } from '../../components/Row'\r\n\r\nimport Slider from '../../components/Slider'\r\nimport CurrencyLogo from '../../components/CurrencyLogo'\r\nimport { ROUTER_ADDRESS } from '../../constants'\r\nimport { useActiveWeb3React } from '../../hooks'\r\nimport { useCurrency } from '../../hooks/Tokens'\r\nimport { usePairContract } from '../../hooks/useContract'\r\n\r\nimport { useTransactionAdder } from '../../state/transactions/hooks'\r\nimport { StyledInternalLink, TYPE } from '../../components/Shared'\r\nimport { calculateGasMargin, calculateSlippageAmount, getRouterContract } from '../../utils'\r\nimport { currencyId } from '../../utils/currencyId'\r\nimport useDebouncedChangeHandler from '../../utils/useDebouncedChangeHandler'\r\nimport { wrappedCurrency } from '../../utils/wrappedCurrency'\r\nimport AppBody from '../AppBody'\r\nimport { ClickableText, Wrapper } from '../Pool/styleds'\r\nimport { useApproveCallback, ApprovalState } from '../../hooks/useApproveCallback'\r\nimport { Dots } from '../../components/swap/styleds'\r\nimport { useBurnActionHandlers, useDerivedBurnInfo, useBurnState } from '../../state/burn/hooks'\r\n\r\nimport { Field } from '../../state/burn/actions'\r\nimport { useUserDeadline, useUserSlippageTolerance } from '../../state/user/hooks'\r\n\r\nconst { italic: Italic } = TYPE\r\n\r\nconst OutlineCard = styled.div`\r\n  border: 1px solid ${({ theme }) => theme.colors.borderColor};\r\n  border-radius: 16px;\r\n  padding: 24px;\r\n`\r\n\r\nconst Body = styled.div`\r\n  padding-left: 24px;\r\n  padding-right: 24px;\r\n`\r\n\r\nexport default function RemoveLiquidity({\r\n  history,\r\n  match: {\r\n    params: { currencyIdA, currencyIdB },\r\n  },\r\n}: RouteComponentProps<{ currencyIdA: string; currencyIdB: string }>) {\r\n  const [currencyA, currencyB] = [useCurrency(currencyIdA) ?? undefined, useCurrency(currencyIdB) ?? undefined]\r\n  const { account, chainId, library } = useActiveWeb3React()\r\n  const [tokenA, tokenB] = useMemo(() => [wrappedCurrency(currencyA, chainId), wrappedCurrency(currencyB, chainId)], [\r\n    currencyA,\r\n    currencyB,\r\n    chainId,\r\n  ])\r\n\r\n  const theme = useContext(ThemeContext)\r\n\r\n  // burn state\r\n  const { independentField, typedValue } = useBurnState()\r\n  const { pair, parsedAmounts, error } = useDerivedBurnInfo(currencyA ?? undefined, currencyB ?? undefined)\r\n  const { onUserInput: _onUserInput } = useBurnActionHandlers()\r\n  const isValid = !error\r\n\r\n  // modal and loading\r\n  const [showConfirm, setShowConfirm] = useState<boolean>(false)\r\n  const [showDetailed, setShowDetailed] = useState<boolean>(false)\r\n  const [attemptingTxn, setAttemptingTxn] = useState(false) // clicked confirm\r\n\r\n  // txn values\r\n  const [txHash, setTxHash] = useState<string>('')\r\n  const [deadline] = useUserDeadline()\r\n  const [allowedSlippage] = useUserSlippageTolerance()\r\n\r\n  const formattedAmounts = {\r\n    [Field.LIQUIDITY_PERCENT]: parsedAmounts[Field.LIQUIDITY_PERCENT].equalTo('0')\r\n      ? '0'\r\n      : parsedAmounts[Field.LIQUIDITY_PERCENT].lessThan(new Percent('1', '100'))\r\n      ? '<1'\r\n      : parsedAmounts[Field.LIQUIDITY_PERCENT].toFixed(0),\r\n    [Field.LIQUIDITY]:\r\n      independentField === Field.LIQUIDITY ? typedValue : parsedAmounts[Field.LIQUIDITY]?.toSignificant(6) ?? '',\r\n    [Field.CURRENCY_A]:\r\n      independentField === Field.CURRENCY_A ? typedValue : parsedAmounts[Field.CURRENCY_A]?.toSignificant(6) ?? '',\r\n    [Field.CURRENCY_B]:\r\n      independentField === Field.CURRENCY_B ? typedValue : parsedAmounts[Field.CURRENCY_B]?.toSignificant(6) ?? '',\r\n  }\r\n\r\n  const atMaxAmount = parsedAmounts[Field.LIQUIDITY_PERCENT]?.equalTo(new Percent('1'))\r\n\r\n  // pair contract\r\n  const pairContract: Contract | null = usePairContract(pair?.liquidityToken?.address)\r\n\r\n  // allowance handling\r\n  const [signatureData, setSignatureData] = useState<{ v: number; r: string; s: string; deadline: number } | null>(null)\r\n  const [approval, approveCallback] = useApproveCallback(parsedAmounts[Field.LIQUIDITY], ROUTER_ADDRESS)\r\n  async function onAttemptToApprove() {\r\n    if (!pairContract || !pair || !library) throw new Error('missing dependencies')\r\n    const liquidityAmount = parsedAmounts[Field.LIQUIDITY]\r\n    if (!liquidityAmount) throw new Error('missing liquidity amount')\r\n    // try to gather a signature for permission\r\n    const nonce = await pairContract.nonces(account)\r\n\r\n    const deadlineForSignature: number = Math.ceil(Date.now() / 1000) + deadline\r\n\r\n    const EIP712Domain = [\r\n      { name: 'name', type: 'string' },\r\n      { name: 'version', type: 'string' },\r\n      { name: 'chainId', type: 'uint256' },\r\n      { name: 'verifyingContract', type: 'address' },\r\n    ]\r\n    const domain = {\r\n      name: 'Sirens Treasure LPs',\r\n      version: '1',\r\n      chainId,\r\n      verifyingContract: pair.liquidityToken.address,\r\n    }\r\n    const Permit = [\r\n      { name: 'owner', type: 'address' },\r\n      { name: 'spender', type: 'address' },\r\n      { name: 'value', type: 'uint256' },\r\n      { name: 'nonce', type: 'uint256' },\r\n      { name: 'deadline', type: 'uint256' },\r\n    ]\r\n    const message = {\r\n      owner: account,\r\n      spender: ROUTER_ADDRESS,\r\n      value: liquidityAmount.raw.toString(),\r\n      nonce: nonce.toHexString(),\r\n      deadline: deadlineForSignature,\r\n    }\r\n    const data = JSON.stringify({\r\n      types: {\r\n        EIP712Domain,\r\n        Permit,\r\n      },\r\n      domain,\r\n      primaryType: 'Permit',\r\n      message,\r\n    })\r\n\r\n    library\r\n      .send('eth_signTypedData_v4', [account, data])\r\n      .then(splitSignature)\r\n      .then((signature) => {\r\n        setSignatureData({\r\n          v: signature.v,\r\n          r: signature.r,\r\n          s: signature.s,\r\n          deadline: deadlineForSignature,\r\n        })\r\n      })\r\n      .catch((e) => {\r\n        // for all errors other than 4001 (EIP-1193 user rejected request), fall back to manual approve\r\n        if (e?.code !== 4001) {\r\n          approveCallback()\r\n        }\r\n      })\r\n  }\r\n\r\n  // wrapped onUserInput to clear signatures\r\n  const onUserInput = useCallback(\r\n    (field: Field, val: string) => {\r\n      setSignatureData(null)\r\n      return _onUserInput(field, val)\r\n    },\r\n    [_onUserInput]\r\n  )\r\n\r\n  const onLiquidityInput = useCallback((val: string): void => onUserInput(Field.LIQUIDITY, val), [onUserInput])\r\n  const onCurrencyAInput = useCallback((val: string): void => onUserInput(Field.CURRENCY_A, val), [onUserInput])\r\n  const onCurrencyBInput = useCallback((val: string): void => onUserInput(Field.CURRENCY_B, val), [onUserInput])\r\n\r\n  // tx sending\r\n  const addTransaction = useTransactionAdder()\r\n  async function onRemove() {\r\n    if (!chainId || !library || !account) throw new Error('missing dependencies')\r\n    const { [Field.CURRENCY_A]: currencyAmountA, [Field.CURRENCY_B]: currencyAmountB } = parsedAmounts\r\n    if (!currencyAmountA || !currencyAmountB) {\r\n      throw new Error('missing currency amounts')\r\n    }\r\n    const router = getRouterContract(chainId, library, account)\r\n\r\n    const amountsMin = {\r\n      [Field.CURRENCY_A]: calculateSlippageAmount(currencyAmountA, allowedSlippage)[0],\r\n      [Field.CURRENCY_B]: calculateSlippageAmount(currencyAmountB, allowedSlippage)[0],\r\n    }\r\n\r\n    if (!currencyA || !currencyB) throw new Error('missing tokens')\r\n    const liquidityAmount = parsedAmounts[Field.LIQUIDITY]\r\n    if (!liquidityAmount) throw new Error('missing liquidity amount')\r\n\r\n    const currencyBIsETH = currencyB === ETHER\r\n    const oneCurrencyIsETH = currencyA === ETHER || currencyBIsETH\r\n    const deadlineFromNow = Math.ceil(Date.now() / 1000) + deadline\r\n\r\n    if (!tokenA || !tokenB) throw new Error('could not wrap')\r\n\r\n    let methodNames: string[]\r\n    let args: Array<string | string[] | number | boolean>\r\n    // we have approval, use normal remove liquidity\r\n    if (approval === ApprovalState.APPROVED) {\r\n      // removeLiquidityETH\r\n      if (oneCurrencyIsETH) {\r\n        methodNames = ['removeLiquidityETH', 'removeLiquidityETHSupportingFeeOnTransferTokens']\r\n        args = [\r\n          currencyBIsETH ? tokenA.address : tokenB.address,\r\n          liquidityAmount.raw.toString(),\r\n          amountsMin[currencyBIsETH ? Field.CURRENCY_A : Field.CURRENCY_B].toString(),\r\n          amountsMin[currencyBIsETH ? Field.CURRENCY_B : Field.CURRENCY_A].toString(),\r\n          account,\r\n          deadlineFromNow,\r\n        ]\r\n      }\r\n      // removeLiquidity\r\n      else {\r\n        methodNames = ['removeLiquidity']\r\n        args = [\r\n          tokenA.address,\r\n          tokenB.address,\r\n          liquidityAmount.raw.toString(),\r\n          amountsMin[Field.CURRENCY_A].toString(),\r\n          amountsMin[Field.CURRENCY_B].toString(),\r\n          account,\r\n          deadlineFromNow,\r\n        ]\r\n      }\r\n    }\r\n    // we have a signataure, use permit versions of remove liquidity\r\n    else if (signatureData !== null) {\r\n      // removeLiquidityETHWithPermit\r\n      if (oneCurrencyIsETH) {\r\n        methodNames = ['removeLiquidityETHWithPermit', 'removeLiquidityETHWithPermitSupportingFeeOnTransferTokens']\r\n        args = [\r\n          currencyBIsETH ? tokenA.address : tokenB.address,\r\n          liquidityAmount.raw.toString(),\r\n          amountsMin[currencyBIsETH ? Field.CURRENCY_A : Field.CURRENCY_B].toString(),\r\n          amountsMin[currencyBIsETH ? Field.CURRENCY_B : Field.CURRENCY_A].toString(),\r\n          account,\r\n          signatureData.deadline,\r\n          false,\r\n          signatureData.v,\r\n          signatureData.r,\r\n          signatureData.s,\r\n        ]\r\n      }\r\n      // removeLiquidityETHWithPermit\r\n      else {\r\n        methodNames = ['removeLiquidityWithPermit']\r\n        args = [\r\n          tokenA.address,\r\n          tokenB.address,\r\n          liquidityAmount.raw.toString(),\r\n          amountsMin[Field.CURRENCY_A].toString(),\r\n          amountsMin[Field.CURRENCY_B].toString(),\r\n          account,\r\n          signatureData.deadline,\r\n          false,\r\n          signatureData.v,\r\n          signatureData.r,\r\n          signatureData.s,\r\n        ]\r\n      }\r\n    } else {\r\n      throw new Error('Attempting to confirm without approval or a signature. Please contact support.')\r\n    }\r\n    const safeGasEstimates: (BigNumber | undefined)[] = await Promise.all(\r\n      methodNames.map((methodName, index) =>\r\n        router.estimateGas[methodName](...args)\r\n          .then(calculateGasMargin)\r\n          .catch((e) => {\r\n            console.error(`estimateGas failed`, index, methodName, args, e)\r\n            return undefined\r\n          })\r\n      )\r\n    )\r\n\r\n    const indexOfSuccessfulEstimation = safeGasEstimates.findIndex((safeGasEstimate) =>\r\n      BigNumber.isBigNumber(safeGasEstimate)\r\n    )\r\n\r\n    // all estimations failed...\r\n    if (indexOfSuccessfulEstimation === -1) {\r\n      console.error('This transaction would fail. Please contact support.')\r\n    } else {\r\n      const methodName = methodNames[indexOfSuccessfulEstimation]\r\n      const safeGasEstimate = safeGasEstimates[indexOfSuccessfulEstimation]\r\n\r\n      setAttemptingTxn(true)\r\n      await router[methodName](...args, {\r\n        gasLimit: safeGasEstimate,\r\n      })\r\n        .then((response: TransactionResponse) => {\r\n          setAttemptingTxn(false)\r\n\r\n          addTransaction(response, {\r\n            summary: `Remove ${parsedAmounts[Field.CURRENCY_A]?.toSignificant(3)} ${\r\n              currencyA?.symbol\r\n            } and ${parsedAmounts[Field.CURRENCY_B]?.toSignificant(3)} ${currencyB?.symbol}`,\r\n          })\r\n\r\n          setTxHash(response.hash)\r\n        })\r\n        .catch((e: Error) => {\r\n          setAttemptingTxn(false)\r\n          // we only care if the error is something _other_ than the user rejected the tx\r\n          console.error(e)\r\n        })\r\n    }\r\n  }\r\n\r\n  function modalHeader() {\r\n    return (\r\n      <AutoColumn gap=\"md\" style={{ marginTop: '20px' }}>\r\n        <RowBetween align=\"flex-end\">\r\n          <Text fontSize=\"24px\">{parsedAmounts[Field.CURRENCY_A]?.toSignificant(6)}</Text>\r\n          <RowFixed gap=\"4px\">\r\n            <CurrencyLogo currency={currencyA} size=\"24px\" />\r\n            <Text fontSize=\"24px\" style={{ marginLeft: '10px' }}>\r\n              {currencyA?.symbol}\r\n            </Text>\r\n          </RowFixed>\r\n        </RowBetween>\r\n        <RowFixed>\r\n          <Plus size=\"16\" color={theme.colors.textSubtle} />\r\n        </RowFixed>\r\n        <RowBetween align=\"flex-end\">\r\n          <Text fontSize=\"24px\">{parsedAmounts[Field.CURRENCY_B]?.toSignificant(6)}</Text>\r\n          <RowFixed gap=\"4px\">\r\n            <CurrencyLogo currency={currencyB} size=\"24px\" />\r\n            <Text fontSize=\"24px\" style={{ marginLeft: '10px' }}>\r\n              {currencyB?.symbol}\r\n            </Text>\r\n          </RowFixed>\r\n        </RowBetween>\r\n\r\n        <Italic fontSize={12} color={theme.colors.textSubtle} textAlign=\"left\" padding=\"12px 0 0 0\">\r\n          {`Output is estimated. If the price changes by more than ${\r\n            allowedSlippage / 100\r\n          }% your transaction will revert.`}\r\n        </Italic>\r\n      </AutoColumn>\r\n    )\r\n  }\r\n\r\n  function modalBottom() {\r\n    return (\r\n      <>\r\n        <RowBetween>\r\n          <Text color=\"textSubtle\">{`FLIP ${currencyA?.symbol}/${currencyB?.symbol}`} Burned</Text>\r\n          <RowFixed>\r\n            <DoubleCurrencyLogo currency0={currencyA} currency1={currencyB} margin />\r\n            <Text>{parsedAmounts[Field.LIQUIDITY]?.toSignificant(6)}</Text>\r\n          </RowFixed>\r\n        </RowBetween>\r\n        {pair && (\r\n          <>\r\n            <RowBetween>\r\n              <Text color=\"textSubtle\">Price</Text>\r\n              <Text>\r\n                1 {currencyA?.symbol} = {tokenA ? pair.priceOf(tokenA).toSignificant(6) : '-'} {currencyB?.symbol}\r\n              </Text>\r\n            </RowBetween>\r\n            <RowBetween>\r\n              <div />\r\n              <Text>\r\n                1 {currencyB?.symbol} = {tokenB ? pair.priceOf(tokenB).toSignificant(6) : '-'} {currencyA?.symbol}\r\n              </Text>\r\n            </RowBetween>\r\n          </>\r\n        )}\r\n        <Button disabled={!(approval === ApprovalState.APPROVED || signatureData !== null)} onClick={onRemove}>\r\n          Confirm\r\n        </Button>\r\n      </>\r\n    )\r\n  }\r\n\r\n  const pendingText = `Removing ${parsedAmounts[Field.CURRENCY_A]?.toSignificant(6)} ${\r\n    currencyA?.symbol\r\n  } and ${parsedAmounts[Field.CURRENCY_B]?.toSignificant(6)} ${currencyB?.symbol}`\r\n\r\n  const liquidityPercentChangeCallback = useCallback(\r\n    (value: number) => {\r\n      onUserInput(Field.LIQUIDITY_PERCENT, value.toString())\r\n    },\r\n    [onUserInput]\r\n  )\r\n\r\n  const oneCurrencyIsETH = currencyA === ETHER || currencyB === ETHER\r\n  const oneCurrencyIsWETH = Boolean(\r\n    chainId &&\r\n      ((currencyA && currencyEquals(WETH[chainId], currencyA)) ||\r\n        (currencyB && currencyEquals(WETH[chainId], currencyB)))\r\n  )\r\n\r\n  const handleSelectCurrencyA = useCallback(\r\n    (currency: Currency) => {\r\n      if (currencyIdB && currencyId(currency) === currencyIdB) {\r\n        history.push(`/remove/${currencyId(currency)}/${currencyIdA}`)\r\n      } else {\r\n        history.push(`/remove/${currencyId(currency)}/${currencyIdB}`)\r\n      }\r\n    },\r\n    [currencyIdA, currencyIdB, history]\r\n  )\r\n  const handleSelectCurrencyB = useCallback(\r\n    (currency: Currency) => {\r\n      if (currencyIdA && currencyId(currency) === currencyIdA) {\r\n        history.push(`/remove/${currencyIdB}/${currencyId(currency)}`)\r\n      } else {\r\n        history.push(`/remove/${currencyIdA}/${currencyId(currency)}`)\r\n      }\r\n    },\r\n    [currencyIdA, currencyIdB, history]\r\n  )\r\n\r\n  const handleDismissConfirmation = useCallback(() => {\r\n    setShowConfirm(false)\r\n    setSignatureData(null) // important that we clear signature data to avoid bad sigs\r\n    // if there was a tx hash, we want to clear the input\r\n    if (txHash) {\r\n      onUserInput(Field.LIQUIDITY_PERCENT, '0')\r\n    }\r\n    setTxHash('')\r\n  }, [onUserInput, txHash])\r\n\r\n  const [innerLiquidityPercentage, setInnerLiquidityPercentage] = useDebouncedChangeHandler(\r\n    Number.parseInt(parsedAmounts[Field.LIQUIDITY_PERCENT].toFixed(0)),\r\n    liquidityPercentChangeCallback\r\n  )\r\n\r\n  return (\r\n    <>\r\n      <AppBody>\r\n        <AddRemoveTabs adding={false} />\r\n        <Wrapper>\r\n          <TransactionConfirmationModal\r\n            isOpen={showConfirm}\r\n            onDismiss={handleDismissConfirmation}\r\n            attemptingTxn={attemptingTxn}\r\n            hash={txHash || ''}\r\n            content={() => (\r\n              <ConfirmationModalContent\r\n                title=\"You will receive\"\r\n                onDismiss={handleDismissConfirmation}\r\n                topContent={modalHeader}\r\n                bottomContent={modalBottom}\r\n              />\r\n            )}\r\n            pendingText={pendingText}\r\n          />\r\n          <AutoColumn gap=\"md\">\r\n            <Body>\r\n              <OutlineCard>\r\n                <AutoColumn>\r\n                  <RowBetween>\r\n                    <Text>Amount</Text>\r\n                    <ClickableText\r\n                      onClick={() => {\r\n                        setShowDetailed(!showDetailed)\r\n                      }}\r\n                    >\r\n                      {showDetailed ? 'Simple' : 'Detailed'}\r\n                    </ClickableText>\r\n                  </RowBetween>\r\n                  <Flex justifyContent=\"start\">\r\n                    <Text fontSize=\"64px\">{formattedAmounts[Field.LIQUIDITY_PERCENT]}%</Text>\r\n                  </Flex>\r\n                  {!showDetailed && (\r\n                    <>\r\n                      <Flex mb=\"8px\">\r\n                        <Slider value={innerLiquidityPercentage} onChange={setInnerLiquidityPercentage} />\r\n                      </Flex>\r\n                      <Flex justifyContent=\"space-around\">\r\n                        <Button variant=\"tertiary\" size=\"sm\" onClick={() => onUserInput(Field.LIQUIDITY_PERCENT, '25')}>\r\n                          25%\r\n                        </Button>\r\n                        <Button variant=\"tertiary\" size=\"sm\" onClick={() => onUserInput(Field.LIQUIDITY_PERCENT, '50')}>\r\n                          50%\r\n                        </Button>\r\n                        <Button variant=\"tertiary\" size=\"sm\" onClick={() => onUserInput(Field.LIQUIDITY_PERCENT, '75')}>\r\n                          75%\r\n                        </Button>\r\n                        <Button\r\n                          variant=\"tertiary\"\r\n                          size=\"sm\"\r\n                          onClick={() => onUserInput(Field.LIQUIDITY_PERCENT, '100')}\r\n                        >\r\n                          Max\r\n                        </Button>\r\n                      </Flex>\r\n                    </>\r\n                  )}\r\n                </AutoColumn>\r\n              </OutlineCard>\r\n            </Body>\r\n            {!showDetailed && (\r\n              <>\r\n                <ColumnCenter>\r\n                  <ArrowDown size=\"16\" color={theme.colors.textSubtle} />\r\n                </ColumnCenter>\r\n                <Body>\r\n                  <OutlineCard>\r\n                    <AutoColumn gap=\"10px\">\r\n                      <RowBetween>\r\n                        <Text fontSize=\"24px\">{formattedAmounts[Field.CURRENCY_A] || '-'}</Text>\r\n                        <RowFixed>\r\n                          <CurrencyLogo currency={currencyA} style={{ marginRight: '12px' }} />\r\n                          <Text fontSize=\"24px\" id=\"remove-liquidity-tokena-symbol\">\r\n                            {currencyA?.symbol}\r\n                          </Text>\r\n                        </RowFixed>\r\n                      </RowBetween>\r\n                      <RowBetween>\r\n                        <Text fontSize=\"24px\">{formattedAmounts[Field.CURRENCY_B] || '-'}</Text>\r\n                        <RowFixed>\r\n                          <CurrencyLogo currency={currencyB} style={{ marginRight: '12px' }} />\r\n                          <Text fontSize=\"24px\" id=\"remove-liquidity-tokenb-symbol\">\r\n                            {currencyB?.symbol}\r\n                          </Text>\r\n                        </RowFixed>\r\n                      </RowBetween>\r\n                      {chainId && (oneCurrencyIsWETH || oneCurrencyIsETH) ? (\r\n                        <RowBetween style={{ justifyContent: 'flex-end' }}>\r\n                          {oneCurrencyIsETH ? (\r\n                            <StyledInternalLink\r\n                              to={`/remove/${currencyA === ETHER ? WETH[chainId].address : currencyIdA}/${\r\n                                currencyB === ETHER ? WETH[chainId].address : currencyIdB\r\n                              }`}\r\n                            >\r\n                              Receive WREDLC\r\n                            </StyledInternalLink>\r\n                          ) : oneCurrencyIsWETH ? (\r\n                            <StyledInternalLink\r\n                              to={`/remove/${\r\n                                currencyA && currencyEquals(currencyA, WETH[chainId]) ? 'ETH' : currencyIdA\r\n                              }/${currencyB && currencyEquals(currencyB, WETH[chainId]) ? 'ETH' : currencyIdB}`}\r\n                            >\r\n                              Receive REDLC\r\n                            </StyledInternalLink>\r\n                          ) : null}\r\n                        </RowBetween>\r\n                      ) : null}\r\n                    </AutoColumn>\r\n                  </OutlineCard>\r\n                </Body>\r\n              </>\r\n            )}\r\n            <Body style={{ paddingBottom: '24px' }}>\r\n              {showDetailed && (\r\n                <>\r\n                  <CurrencyInputPanel\r\n                    value={formattedAmounts[Field.LIQUIDITY]}\r\n                    onUserInput={onLiquidityInput}\r\n                    onMax={() => {\r\n                      onUserInput(Field.LIQUIDITY_PERCENT, '100')\r\n                    }}\r\n                    showMaxButton={!atMaxAmount}\r\n                    disableCurrencySelect\r\n                    currency={pair?.liquidityToken}\r\n                    pair={pair}\r\n                    id=\"liquidity-amount\"\r\n                  />\r\n                  <ColumnCenter>\r\n                    <ArrowDown size=\"16\" color={theme.colors.textSubtle} />\r\n                  </ColumnCenter>\r\n                  <CurrencyInputPanel\r\n                    hideBalance\r\n                    value={formattedAmounts[Field.CURRENCY_A]}\r\n                    onUserInput={onCurrencyAInput}\r\n                    onMax={() => onUserInput(Field.LIQUIDITY_PERCENT, '100')}\r\n                    showMaxButton={!atMaxAmount}\r\n                    currency={currencyA}\r\n                    label=\"Output\"\r\n                    onCurrencySelect={handleSelectCurrencyA}\r\n                    id=\"remove-liquidity-tokena\"\r\n                  />\r\n                  <ColumnCenter>\r\n                    <Plus size=\"16\" color={theme.colors.textSubtle} />\r\n                  </ColumnCenter>\r\n                  <CurrencyInputPanel\r\n                    hideBalance\r\n                    value={formattedAmounts[Field.CURRENCY_B]}\r\n                    onUserInput={onCurrencyBInput}\r\n                    onMax={() => onUserInput(Field.LIQUIDITY_PERCENT, '100')}\r\n                    showMaxButton={!atMaxAmount}\r\n                    currency={currencyB}\r\n                    label=\"Output\"\r\n                    onCurrencySelect={handleSelectCurrencyB}\r\n                    id=\"remove-liquidity-tokenb\"\r\n                  />\r\n                </>\r\n              )}\r\n              {pair && (\r\n                <div style={{ padding: '24px' }}>\r\n                  <Flex justifyContent=\"space-between\" mb=\"8px\">\r\n                    Price:\r\n                    <div>\r\n                      1 {currencyA?.symbol} = {tokenA ? pair.priceOf(tokenA).toSignificant(6) : '-'} {currencyB?.symbol}\r\n                    </div>\r\n                  </Flex>\r\n                  <Flex justifyContent=\"space-between\">\r\n                    <div />\r\n                    <div>\r\n                      1 {currencyB?.symbol} = {tokenB ? pair.priceOf(tokenB).toSignificant(6) : '-'} {currencyA?.symbol}\r\n                    </div>\r\n                  </Flex>\r\n                </div>\r\n              )}\r\n              <div style={{ position: 'relative' }}>\r\n                {!account ? (\r\n                  <ConnectWalletButton fullWidth />\r\n                ) : (\r\n                  <RowBetween>\r\n                    <Button\r\n                      onClick={onAttemptToApprove}\r\n                      variant={approval === ApprovalState.APPROVED || signatureData !== null ? 'success' : 'primary'}\r\n                      disabled={approval !== ApprovalState.NOT_APPROVED || signatureData !== null}\r\n                      mr=\"8px\"\r\n                    >\r\n                      {approval === ApprovalState.PENDING ? (\r\n                        <Dots>Approving</Dots>\r\n                      ) : approval === ApprovalState.APPROVED || signatureData !== null ? (\r\n                        'Approved'\r\n                      ) : (\r\n                        'Approve'\r\n                      )}\r\n                    </Button>\r\n                    <Button\r\n                      onClick={() => {\r\n                        setShowConfirm(true)\r\n                      }}\r\n                      disabled={!isValid || (signatureData === null && approval !== ApprovalState.APPROVED)}\r\n                      variant={\r\n                        !isValid && !!parsedAmounts[Field.CURRENCY_A] && !!parsedAmounts[Field.CURRENCY_B]\r\n                          ? 'danger'\r\n                          : 'primary'\r\n                      }\r\n                    >\r\n                      {error || 'Remove'}\r\n                    </Button>\r\n                  </RowBetween>\r\n                )}\r\n              </div>\r\n            </Body>\r\n          </AutoColumn>\r\n        </Wrapper>\r\n      </AppBody>\r\n\r\n      {pair ? (\r\n        <AutoColumn style={{ maxWidth: '436px', width: '100%', marginTop: '1rem' }}>\r\n          <MinimalPositionCard showUnwrapped={oneCurrencyIsWETH} pair={pair} />\r\n        </AutoColumn>\r\n      ) : null}\r\n    </>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}