{"ast":null,"code":"import _regeneratorRuntime from\"C:/projects/panther-frontend-dex1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/projects/panther-frontend-dex1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/projects/panther-frontend-dex1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _createClass from\"C:/projects/panther-frontend-dex1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/projects/panther-frontend-dex1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _classCallCheck from\"C:/projects/panther-frontend-dex1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _inherits from\"C:/projects/panther-frontend-dex1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/projects/panther-frontend-dex1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _wrapNativeSuper from\"C:/projects/panther-frontend-dex1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper\";import{AbstractConnector}from'@web3-react/abstract-connector';import warning from'tiny-warning';function parseSendReturn(sendReturn){// eslint-disable-next-line no-prototype-builtins\nreturn sendReturn.hasOwnProperty('result')?sendReturn.result:sendReturn;}export var NoBscProviderError=/*#__PURE__*/function(_Error){_inherits(NoBscProviderError,_Error);var _super=_createSuper(NoBscProviderError);function NoBscProviderError(){var _this;_classCallCheck(this,NoBscProviderError);_this=_super.call(this);_this.name=_this.constructor.name;_this.message='No BSC provider was found on window.BinanceChain.';return _this;}return NoBscProviderError;}(/*#__PURE__*/_wrapNativeSuper(Error));export var UserRejectedRequestError=/*#__PURE__*/function(_Error2){_inherits(UserRejectedRequestError,_Error2);var _super2=_createSuper(UserRejectedRequestError);function UserRejectedRequestError(){var _this2;_classCallCheck(this,UserRejectedRequestError);_this2=_super2.call(this);_this2.name=_this2.constructor.name;_this2.message='The user rejected the request.';return _this2;}return UserRejectedRequestError;}(/*#__PURE__*/_wrapNativeSuper(Error));export var BscConnector=/*#__PURE__*/function(_AbstractConnector){_inherits(BscConnector,_AbstractConnector);var _super3=_createSuper(BscConnector);function BscConnector(kwargs){var _this3;_classCallCheck(this,BscConnector);_this3=_super3.call(this,kwargs);_this3.handleNetworkChanged=_this3.handleNetworkChanged.bind(_assertThisInitialized(_this3));_this3.handleChainChanged=_this3.handleChainChanged.bind(_assertThisInitialized(_this3));_this3.handleAccountsChanged=_this3.handleAccountsChanged.bind(_assertThisInitialized(_this3));_this3.handleClose=_this3.handleClose.bind(_assertThisInitialized(_this3));return _this3;}_createClass(BscConnector,[{key:\"handleChainChanged\",value:function handleChainChanged(chainId){this.emitUpdate({chainId:chainId,provider:window.BinanceChain});}},{key:\"handleAccountsChanged\",value:function handleAccountsChanged(accounts){if(accounts.length===0){this.emitDeactivate();}else{this.emitUpdate({account:accounts[0]});}}},{key:\"handleClose\",value:function handleClose(){this.emitDeactivate();}},{key:\"handleNetworkChanged\",value:function handleNetworkChanged(networkId){this.emitUpdate({chainId:networkId,provider:window.BinanceChain});}},{key:\"activate\",value:function(){var _activate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var account;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(window.BinanceChain){_context.next=2;break;}throw new NoBscProviderError();case 2:if(window.BinanceChain.on){window.BinanceChain.on('chainChanged',this.handleChainChanged);window.BinanceChain.on('accountsChanged',this.handleAccountsChanged);window.BinanceChain.on('close',this.handleClose);window.BinanceChain.on('networkChanged',this.handleNetworkChanged);}if(window.BinanceChain.isMetaMask){window.BinanceChain.autoRefreshOnNetworkChange=false;}// try to activate + get account via eth_requestAccounts\n_context.prev=4;_context.next=7;return window.BinanceChain.send('eth_requestAccounts').then(function(sendReturn){return parseSendReturn(sendReturn)[0];});case 7:account=_context.sent;_context.next=15;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](4);if(!(_context.t0.code===4001)){_context.next=14;break;}throw new UserRejectedRequestError();case 14:warning(false,'eth_requestAccounts was unsuccessful, falling back to enable');case 15:if(account){_context.next=19;break;}_context.next=18;return window.BinanceChain.enable().then(function(sendReturn){return sendReturn&&parseSendReturn(sendReturn)[0];});case 18:account=_context.sent;case 19:return _context.abrupt(\"return\",_objectSpread({provider:window.BinanceChain},account?{account:account}:{}));case 20:case\"end\":return _context.stop();}}},_callee,this,[[4,10]]);}));function activate(){return _activate.apply(this,arguments);}return activate;}()},{key:\"getProvider\",value:function(){var _getProvider=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",window.BinanceChain);case 1:case\"end\":return _context2.stop();}}},_callee2);}));function getProvider(){return _getProvider.apply(this,arguments);}return getProvider;}()},{key:\"getChainId\",value:function(){var _getChainId=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var chainId;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(window.BinanceChain){_context3.next=2;break;}throw new NoBscProviderError();case 2:_context3.prev=2;_context3.next=5;return window.BinanceChain.send('eth_chainId').then(parseSendReturn);case 5:chainId=_context3.sent;_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](2);warning(false,'eth_chainId was unsuccessful, falling back to net_version');case 11:if(chainId){_context3.next=21;break;}_context3.prev=12;_context3.next=15;return window.BinanceChain.send('net_version').then(parseSendReturn);case 15:chainId=_context3.sent;_context3.next=21;break;case 18:_context3.prev=18;_context3.t1=_context3[\"catch\"](12);warning(false,'net_version was unsuccessful, falling back to net version v2');case 21:if(!chainId){try{chainId=parseSendReturn(window.BinanceChain.send({method:'net_version'}));}catch(_unused3){warning(false,'net_version v2 was unsuccessful, falling back to manual matches and static properties');}}if(!chainId){if(window.BinanceChain.isDapper){chainId=parseSendReturn(window.BinanceChain.cachedResults.net_version);}else{chainId=window.BinanceChain.chainId||window.BinanceChain.netVersion||window.BinanceChain.networkVersion||window.BinanceChain._chainId;}}return _context3.abrupt(\"return\",chainId);case 24:case\"end\":return _context3.stop();}}},_callee3,null,[[2,8],[12,18]]);}));function getChainId(){return _getChainId.apply(this,arguments);}return getChainId;}()},{key:\"getAccount\",value:function(){var _getAccount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var account;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(window.BinanceChain){_context4.next=2;break;}throw new NoBscProviderError();case 2:_context4.prev=2;_context4.next=5;return window.BinanceChain.send('eth_accounts').then(function(sendReturn){return parseSendReturn(sendReturn)[0];});case 5:account=_context4.sent;_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](2);warning(false,'eth_accounts was unsuccessful, falling back to enable');case 11:if(account){_context4.next=21;break;}_context4.prev=12;_context4.next=15;return window.BinanceChain.enable().then(function(sendReturn){return parseSendReturn(sendReturn)[0];});case 15:account=_context4.sent;_context4.next=21;break;case 18:_context4.prev=18;_context4.t1=_context4[\"catch\"](12);warning(false,'enable was unsuccessful, falling back to eth_accounts v2');case 21:if(!account){account=parseSendReturn(window.BinanceChain.send({method:'eth_accounts'}))[0];}return _context4.abrupt(\"return\",account);case 23:case\"end\":return _context4.stop();}}},_callee4,null,[[2,8],[12,18]]);}));function getAccount(){return _getAccount.apply(this,arguments);}return getAccount;}()},{key:\"deactivate\",value:function deactivate(){if(window.BinanceChain&&window.BinanceChain.removeListener){window.BinanceChain.removeListener('chainChanged',this.handleChainChanged);window.BinanceChain.removeListener('accountsChanged',this.handleAccountsChanged);window.BinanceChain.removeListener('close',this.handleClose);window.BinanceChain.removeListener('networkChanged',this.handleNetworkChanged);}}},{key:\"isAuthorized\",value:function(){var _isAuthorized=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(window.BinanceChain){_context5.next=2;break;}return _context5.abrupt(\"return\",false);case 2:_context5.prev=2;_context5.next=5;return window.BinanceChain.send('eth_accounts').then(function(sendReturn){if(parseSendReturn(sendReturn).length>0){return true;}return false;});case 5:return _context5.abrupt(\"return\",_context5.sent);case 8:_context5.prev=8;_context5.t0=_context5[\"catch\"](2);return _context5.abrupt(\"return\",false);case 11:case\"end\":return _context5.stop();}}},_callee5,null,[[2,8]]);}));function isAuthorized(){return _isAuthorized.apply(this,arguments);}return isAuthorized;}()}]);return BscConnector;}(AbstractConnector);","map":{"version":3,"sources":["C:/projects/panther-frontend-dex1/src/connectors/bsc/bscConnector.ts"],"names":["AbstractConnector","warning","parseSendReturn","sendReturn","hasOwnProperty","result","NoBscProviderError","name","constructor","message","Error","UserRejectedRequestError","BscConnector","kwargs","handleNetworkChanged","bind","handleChainChanged","handleAccountsChanged","handleClose","chainId","emitUpdate","provider","window","BinanceChain","accounts","length","emitDeactivate","account","networkId","on","isMetaMask","autoRefreshOnNetworkChange","send","then","code","enable","method","isDapper","cachedResults","net_version","netVersion","networkVersion","_chainId","removeListener"],"mappings":"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","sourcesContent":["import { AbstractConnectorArguments, ConnectorUpdate } from '@web3-react/types'\r\nimport { AbstractConnector } from '@web3-react/abstract-connector'\r\nimport warning from 'tiny-warning'\r\n\r\nimport { SendReturnResult, SendReturn, Send, SendOld } from './types'\r\n\r\nfunction parseSendReturn(sendReturn: SendReturnResult | SendReturn): any {\r\n  // eslint-disable-next-line no-prototype-builtins\r\n  return sendReturn.hasOwnProperty('result') ? sendReturn.result : sendReturn\r\n}\r\n\r\nexport class NoBscProviderError extends Error {\r\n  public constructor() {\r\n    super()\r\n    this.name = this.constructor.name\r\n    this.message = 'No BSC provider was found on window.BinanceChain.'\r\n  }\r\n}\r\n\r\nexport class UserRejectedRequestError extends Error {\r\n  public constructor() {\r\n    super()\r\n    this.name = this.constructor.name\r\n    this.message = 'The user rejected the request.'\r\n  }\r\n}\r\n\r\nexport class BscConnector extends AbstractConnector {\r\n  constructor(kwargs: AbstractConnectorArguments) {\r\n    super(kwargs)\r\n\r\n    this.handleNetworkChanged = this.handleNetworkChanged.bind(this)\r\n    this.handleChainChanged = this.handleChainChanged.bind(this)\r\n    this.handleAccountsChanged = this.handleAccountsChanged.bind(this)\r\n    this.handleClose = this.handleClose.bind(this)\r\n  }\r\n\r\n  private handleChainChanged(chainId: string | number): void {\r\n    this.emitUpdate({ chainId, provider: window.BinanceChain })\r\n  }\r\n\r\n  private handleAccountsChanged(accounts: string[]): void {\r\n    if (accounts.length === 0) {\r\n      this.emitDeactivate()\r\n    } else {\r\n      this.emitUpdate({ account: accounts[0] })\r\n    }\r\n  }\r\n\r\n  private handleClose(): void {\r\n    this.emitDeactivate()\r\n  }\r\n\r\n  private handleNetworkChanged(networkId: string | number): void {\r\n    this.emitUpdate({ chainId: networkId, provider: window.BinanceChain })\r\n  }\r\n\r\n  public async activate(): Promise<ConnectorUpdate> {\r\n    if (!window.BinanceChain) {\r\n      throw new NoBscProviderError()\r\n    }\r\n\r\n    if (window.BinanceChain.on) {\r\n      window.BinanceChain.on('chainChanged', this.handleChainChanged)\r\n      window.BinanceChain.on('accountsChanged', this.handleAccountsChanged)\r\n      window.BinanceChain.on('close', this.handleClose)\r\n      window.BinanceChain.on('networkChanged', this.handleNetworkChanged)\r\n    }\r\n\r\n    if ((window.BinanceChain as any).isMetaMask) {\r\n      (window.BinanceChain as any).autoRefreshOnNetworkChange = false\r\n    }\r\n\r\n    // try to activate + get account via eth_requestAccounts\r\n    let account\r\n    try {\r\n      account = await (window.BinanceChain.send as Send)('eth_requestAccounts').then(\r\n        (sendReturn) => parseSendReturn(sendReturn)[0]\r\n      )\r\n    } catch (error) {\r\n      if ((error as any).code === 4001) {\r\n        throw new UserRejectedRequestError()\r\n      }\r\n      warning(false, 'eth_requestAccounts was unsuccessful, falling back to enable')\r\n    }\r\n\r\n    // if unsuccessful, try enable\r\n    if (!account) {\r\n      // if enable is successful but doesn't return accounts, fall back to getAccount (not happy i have to do this...)\r\n      account = await window.BinanceChain.enable().then((sendReturn) => sendReturn && parseSendReturn(sendReturn)[0])\r\n    }\r\n\r\n    return { provider: window.BinanceChain, ...(account ? { account } : {}) }\r\n  }\r\n\r\n  public async getProvider(): Promise<any> {\r\n    return window.BinanceChain\r\n  }\r\n\r\n  public async getChainId(): Promise<number | string> {\r\n    if (!window.BinanceChain) {\r\n      throw new NoBscProviderError()\r\n    }\r\n\r\n    let chainId\r\n    try {\r\n      chainId = await (window.BinanceChain.send as Send)('eth_chainId').then(parseSendReturn)\r\n    } catch {\r\n      warning(false, 'eth_chainId was unsuccessful, falling back to net_version')\r\n    }\r\n\r\n    if (!chainId) {\r\n      try {\r\n        chainId = await (window.BinanceChain.send as Send)('net_version').then(parseSendReturn)\r\n      } catch {\r\n        warning(false, 'net_version was unsuccessful, falling back to net version v2')\r\n      }\r\n    }\r\n\r\n    if (!chainId) {\r\n      try {\r\n        chainId = parseSendReturn((window.BinanceChain.send as SendOld)({ method: 'net_version' }))\r\n      } catch {\r\n        warning(false, 'net_version v2 was unsuccessful, falling back to manual matches and static properties')\r\n      }\r\n    }\r\n\r\n    if (!chainId) {\r\n      if ((window.BinanceChain as any).isDapper) {\r\n        chainId = parseSendReturn((window.BinanceChain as any).cachedResults.net_version)\r\n      } else {\r\n        chainId =\r\n          (window.BinanceChain as any).chainId ||\r\n          (window.BinanceChain as any).netVersion ||\r\n          (window.BinanceChain as any).networkVersion ||\r\n          (window.BinanceChain as any)._chainId\r\n      }\r\n    }\r\n\r\n    return chainId\r\n  }\r\n\r\n  public async getAccount(): Promise<null | string> {\r\n    if (!window.BinanceChain) {\r\n      throw new NoBscProviderError()\r\n    }\r\n\r\n    let account\r\n    try {\r\n      account = await (window.BinanceChain.send as Send)('eth_accounts').then(\r\n        (sendReturn) => parseSendReturn(sendReturn)[0]\r\n      )\r\n    } catch {\r\n      warning(false, 'eth_accounts was unsuccessful, falling back to enable')\r\n    }\r\n\r\n    if (!account) {\r\n      try {\r\n        account = await window.BinanceChain.enable().then((sendReturn) => parseSendReturn(sendReturn)[0])\r\n      } catch {\r\n        warning(false, 'enable was unsuccessful, falling back to eth_accounts v2')\r\n      }\r\n    }\r\n\r\n    if (!account) {\r\n      account = parseSendReturn((window.BinanceChain.send as SendOld)({ method: 'eth_accounts' }))[0]\r\n    }\r\n\r\n    return account\r\n  }\r\n\r\n  public deactivate() {\r\n    if (window.BinanceChain && window.BinanceChain.removeListener) {\r\n      window.BinanceChain.removeListener('chainChanged', this.handleChainChanged)\r\n      window.BinanceChain.removeListener('accountsChanged', this.handleAccountsChanged)\r\n      window.BinanceChain.removeListener('close', this.handleClose)\r\n      window.BinanceChain.removeListener('networkChanged', this.handleNetworkChanged)\r\n    }\r\n  }\r\n\r\n  public async isAuthorized(): Promise<boolean> {\r\n    if (!window.BinanceChain) {\r\n      return false\r\n    }\r\n\r\n    try {\r\n      return await (window.BinanceChain.send as Send)('eth_accounts').then((sendReturn) => {\r\n        if (parseSendReturn(sendReturn).length > 0) {\r\n          return true\r\n        }\r\n        return false\r\n      })\r\n    } catch {\r\n      return false\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}