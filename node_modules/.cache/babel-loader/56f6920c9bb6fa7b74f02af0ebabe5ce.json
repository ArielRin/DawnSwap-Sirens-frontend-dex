{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"C:/projects/panther-frontend-dex1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"C:/projects/panther-frontend-dex1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  display: flex;\\n  margin-bottom: 8px;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  display: flex;\\n  flex-direction: column;\\n\\n  \",\":first-child {\\n    padding-left: 0;\\n  }\\n\\n  \",\":last-child {\\n    padding-right: 0;\\n  }\\n\\n  \",\" {\\n    flex-direction: row;\\n  }\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  padding: 0 4px;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  margin-bottom: 16px;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useEffect,useState}from'react';import styled from'styled-components';import{Button,Flex,Input,Text}from'@pantherswap-libs/uikit';import{useUserSlippageTolerance}from'state/user/hooks';import QuestionHelper from'../QuestionHelper';import TranslatedText from'../TranslatedText';var MAX_SLIPPAGE=5000;var RISKY_SLIPPAGE_LOW=50;var RISKY_SLIPPAGE_HIGH=500;var StyledSlippageToleranceSettings=styled.div(_templateObject());var Option=styled.div(_templateObject2());var Options=styled.div(_templateObject3(),Option,Option,function(_ref){var theme=_ref.theme;return theme.mediaQueries.sm;});var Label=styled.div(_templateObject4());var predefinedValues=[{label:'0.1%',value:0.1},{label:'0.5%',value:0.5},{label:'1%',value:1}];var SlippageToleranceSettings=function SlippageToleranceSettings(){var _useUserSlippageToler=useUserSlippageTolerance(),_useUserSlippageToler2=_slicedToArray(_useUserSlippageToler,2),userSlippageTolerance=_useUserSlippageToler2[0],setUserslippageTolerance=_useUserSlippageToler2[1];var _useState=useState(userSlippageTolerance/100),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var handleChange=function handleChange(evt){var inputValue=evt.target.value;setValue(parseFloat(inputValue));};// Updates local storage if value is valid\nuseEffect(function(){try{var rawValue=value*100;if(!Number.isNaN(rawValue)&&rawValue>0&&rawValue<MAX_SLIPPAGE){setUserslippageTolerance(rawValue);setError(null);}else{setError('Enter a valid slippage percentage');}}catch(_unused){setError('Enter a valid slippage percentage');}},[value,setError,setUserslippageTolerance]);// Notify user if slippage is risky\nuseEffect(function(){if(userSlippageTolerance<RISKY_SLIPPAGE_LOW){setError('Your transaction may fail');}else if(userSlippageTolerance>RISKY_SLIPPAGE_HIGH){setError('Your transaction may be frontrun');}},[userSlippageTolerance,setError]);return/*#__PURE__*/_jsxs(StyledSlippageToleranceSettings,{children:[/*#__PURE__*/_jsxs(Label,{children:[/*#__PURE__*/_jsx(Text,{style:{fontWeight:600},children:/*#__PURE__*/_jsx(TranslatedText,{translationId:88,children:\"Slippage tolerance\"})}),/*#__PURE__*/_jsx(QuestionHelper,{text:\"Your transaction will revert if the price changes unfavorably by more than this percentage.\"})]}),/*#__PURE__*/_jsxs(Options,{children:[/*#__PURE__*/_jsx(Flex,{mb:['8px',0],mr:[0,'8px'],children:predefinedValues.map(function(_ref2){var label=_ref2.label,predefinedValue=_ref2.value;var handleClick=function handleClick(){return setValue(predefinedValue);};return/*#__PURE__*/_jsx(Option,{children:/*#__PURE__*/_jsx(Button,{variant:value===predefinedValue?'primary':'tertiary',onClick:handleClick,children:label})},predefinedValue);})}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",children:[/*#__PURE__*/_jsx(Option,{children:/*#__PURE__*/_jsx(Input,{type:\"number\",scale:\"lg\",step:0.1,min:0.1,placeholder:\"5%\",value:value,onChange:handleChange,isWarning:error!==null})}),/*#__PURE__*/_jsx(Option,{children:/*#__PURE__*/_jsx(Text,{fontSize:\"18px\",children:\"%\"})})]})]}),error&&/*#__PURE__*/_jsx(Text,{mt:\"8px\",color:\"failure\",children:error})]});};export default SlippageToleranceSettings;","map":{"version":3,"sources":["C:/projects/panther-frontend-dex1/src/components/PageHeader/SlippageToleranceSetting.tsx"],"names":["React","useEffect","useState","styled","Button","Flex","Input","Text","useUserSlippageTolerance","QuestionHelper","TranslatedText","MAX_SLIPPAGE","RISKY_SLIPPAGE_LOW","RISKY_SLIPPAGE_HIGH","StyledSlippageToleranceSettings","div","Option","Options","theme","mediaQueries","sm","Label","predefinedValues","label","value","SlippageToleranceSettings","userSlippageTolerance","setUserslippageTolerance","setValue","error","setError","handleChange","evt","inputValue","target","parseFloat","rawValue","Number","isNaN","fontWeight","map","predefinedValue","handleClick"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Button, Flex, Input, Text } from '@pantherswap-libs/uikit'\r\nimport { useUserSlippageTolerance } from 'state/user/hooks'\r\nimport QuestionHelper from '../QuestionHelper'\r\nimport TranslatedText from '../TranslatedText'\r\n\r\nconst MAX_SLIPPAGE = 5000\r\nconst RISKY_SLIPPAGE_LOW = 50\r\nconst RISKY_SLIPPAGE_HIGH = 500\r\n\r\nconst StyledSlippageToleranceSettings = styled.div`\r\n  margin-bottom: 16px;\r\n`\r\n\r\nconst Option = styled.div`\r\n  padding: 0 4px;\r\n`\r\n\r\nconst Options = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  ${Option}:first-child {\r\n    padding-left: 0;\r\n  }\r\n\r\n  ${Option}:last-child {\r\n    padding-right: 0;\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    flex-direction: row;\r\n  }\r\n`\r\n\r\nconst Label = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  margin-bottom: 8px;\r\n`\r\n\r\nconst predefinedValues = [\r\n  { label: '0.1%', value: 0.1 },\r\n  { label: '0.5%', value: 0.5 },\r\n  { label: '1%', value: 1 }\r\n]\r\n\r\nconst SlippageToleranceSettings = () => {\r\n  const [userSlippageTolerance, setUserslippageTolerance] = useUserSlippageTolerance()\r\n  const [value, setValue] = useState(userSlippageTolerance / 100)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  const handleChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { value: inputValue } = evt.target\r\n    setValue(parseFloat(inputValue))\r\n  }\r\n\r\n  // Updates local storage if value is valid\r\n  useEffect(() => {\r\n    try {\r\n      const rawValue = value * 100\r\n      if (!Number.isNaN(rawValue) && rawValue > 0 && rawValue < MAX_SLIPPAGE) {\r\n        setUserslippageTolerance(rawValue)\r\n        setError(null)\r\n      } else {\r\n        setError('Enter a valid slippage percentage')\r\n      }\r\n    } catch {\r\n      setError('Enter a valid slippage percentage')\r\n    }\r\n  }, [value, setError, setUserslippageTolerance])\r\n\r\n  // Notify user if slippage is risky\r\n  useEffect(() => {\r\n    if (userSlippageTolerance < RISKY_SLIPPAGE_LOW) {\r\n      setError('Your transaction may fail')\r\n    } else if (userSlippageTolerance > RISKY_SLIPPAGE_HIGH) {\r\n      setError('Your transaction may be frontrun')\r\n    }\r\n  }, [userSlippageTolerance, setError])\r\n\r\n  return (\r\n    <StyledSlippageToleranceSettings>\r\n      <Label>\r\n        <Text style={{ fontWeight: 600 }}>\r\n          <TranslatedText translationId={88}>Slippage tolerance</TranslatedText>\r\n        </Text>\r\n        <QuestionHelper text=\"Your transaction will revert if the price changes unfavorably by more than this percentage.\" />\r\n      </Label>\r\n      <Options>\r\n        <Flex mb={['8px', 0]} mr={[0, '8px']}>\r\n          {predefinedValues.map(({ label, value: predefinedValue }) => {\r\n            const handleClick = () => setValue(predefinedValue)\r\n\r\n            return (\r\n              <Option key={predefinedValue}>\r\n                <Button variant={value === predefinedValue ? 'primary' : 'tertiary'} onClick={handleClick}>\r\n                  {label}\r\n                </Button>\r\n              </Option>\r\n            )\r\n          })}\r\n        </Flex>\r\n        <Flex alignItems=\"center\">\r\n          <Option>\r\n            <Input\r\n              type=\"number\"\r\n              scale=\"lg\"\r\n              step={0.1}\r\n              min={0.1}\r\n              placeholder=\"5%\"\r\n              value={value}\r\n              onChange={handleChange}\r\n              isWarning={error !== null}\r\n            />\r\n          </Option>\r\n          <Option>\r\n            <Text fontSize=\"18px\">%</Text>\r\n          </Option>\r\n        </Flex>\r\n      </Options>\r\n      {error && (\r\n        <Text mt=\"8px\" color=\"failure\">\r\n          {error}\r\n        </Text>\r\n      )}\r\n    </StyledSlippageToleranceSettings>\r\n  )\r\n}\r\n\r\nexport default SlippageToleranceSettings\r\n"]},"metadata":{},"sourceType":"module"}